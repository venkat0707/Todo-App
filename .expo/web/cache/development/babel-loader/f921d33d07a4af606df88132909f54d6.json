{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport createDataContext from \"./createDataContext\";\nvar INITIAL_STATE = {\n  todos: [],\n  editId: null,\n  filterBy: 'All'\n};\n\nvar todoReducer = function todoReducer(state, action) {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        todos: [].concat(_toConsumableArray(state.todos), [{\n          id: \"todo-\" + Date.now(),\n          completed: false,\n          text: action.payload\n        }])\n      });\n\n    case 'DELETE_TODO':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        todos: state.todos.filter(function (todo) {\n          return todo.id !== action.payload;\n        })\n      });\n\n    case 'TOGGLE_TODO':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        todos: state.todos.map(function (todo) {\n          if (todo.id === action.payload) {\n            return _objectSpread(_objectSpread({}, todo), {}, {\n              completed: !todo.completed\n            });\n          }\n\n          return todo;\n        })\n      });\n\n    case 'SET_EDIT_ID':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        editId: action.payload\n      });\n\n    case 'EDIT_TODO':\n      var editId = state.editId,\n          todos = state.todos;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        todos: todos.map(function (todo) {\n          if (todo.id === editId) {\n            return _objectSpread(_objectSpread({}, todo), {}, {\n              text: action.payload\n            });\n          }\n\n          return todo;\n        })\n      });\n\n    case 'SET_FILTER':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        filterBy: action.payload\n      });\n\n    case 'RESET':\n      return _objectSpread({}, INITIAL_STATE);\n\n    case 'GET_LOCAL_DATA':\n      return _objectSpread(_objectSpread({}, state), action.payload);\n\n    case 'SAVE_DATA':\n    default:\n      return state;\n  }\n};\n\nvar addTodo = function addTodo(dispatch) {\n  return function (text) {\n    return dispatch({\n      type: 'ADD_TODO',\n      payload: text\n    });\n  };\n};\n\nvar deleteTodo = function deleteTodo(dispatch) {\n  return function (id) {\n    return dispatch({\n      type: 'DELETE_TODO',\n      payload: id\n    });\n  };\n};\n\nvar toggleTodo = function toggleTodo(dispatch) {\n  return function (id) {\n    return dispatch({\n      type: 'TOGGLE_TODO',\n      payload: id\n    });\n  };\n};\n\nvar setEditId = function setEditId(dispatch) {\n  return function (id) {\n    return dispatch({\n      type: 'SET_EDIT_ID',\n      payload: id\n    });\n  };\n};\n\nvar editTodo = function editTodo(dispatch) {\n  return function (text) {\n    return dispatch({\n      type: 'EDIT_TODO',\n      payload: text\n    });\n  };\n};\n\nvar setFilter = function setFilter(dispatch) {\n  return function (filter) {\n    return dispatch({\n      type: 'SET_FILTER',\n      payload: filter\n    });\n  };\n};\n\nvar reset = function reset(dispatch) {\n  return function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.clear());\n\n          case 2:\n            dispatch({\n              type: 'RESET'\n            });\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar getLocalData = function getLocalData(dispatch) {\n  return function _callee2() {\n    var localData;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('DATA'));\n\n          case 3:\n            localData = _context2.sent;\n\n            if (localData !== null) {\n              dispatch({\n                type: 'GET_LOCAL_DATA',\n                payload: JSON.parse(localData)\n              });\n            }\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n};\n\nvar saveData = function saveData(dispatch) {\n  return function _callee3(data) {\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('DATA', JSON.stringify(data)));\n\n          case 3:\n            _context3.next = 8;\n            break;\n\n          case 5:\n            _context3.prev = 5;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 8:\n            dispatch({\n              type: 'SAVE_DATA'\n            });\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(todoReducer, {\n  addTodo: addTodo,\n  deleteTodo: deleteTodo,\n  toggleTodo: toggleTodo,\n  setEditId: setEditId,\n  editTodo: editTodo,\n  setFilter: setFilter,\n  reset: reset,\n  getLocalData: getLocalData,\n  saveData: saveData\n}, _objectSpread({}, INITIAL_STATE)),\n    Context = _createDataContext.Context,\n    Provider = _createDataContext.Provider;\n\nexport { Context as TodoContext, Provider as TodoProvider };","map":{"version":3,"sources":["/home/venky/Music/main/src/context/TodoContext.js"],"names":["AsyncStorage","createDataContext","INITIAL_STATE","todos","editId","filterBy","todoReducer","state","action","type","id","Date","now","completed","text","payload","filter","todo","map","addTodo","dispatch","deleteTodo","toggleTodo","setEditId","editTodo","setFilter","reset","clear","getLocalData","getItem","localData","JSON","parse","console","log","saveData","data","setItem","stringify","Context","Provider","TodoContext","TodoProvider"],"mappings":"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","sourcesContent":["import { AsyncStorage } from 'react-native';\nimport createDataContext from './createDataContext';\n\nconst INITIAL_STATE = {\n  todos: [\n    // { id: '1', text: 'todo 1', completed: false },\n    // { id: '2', text: 'todo 2', completed: true }\n  ],\n  editId: null,\n  filterBy: 'All'\n};\n\nconst todoReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return {\n        ...state,\n        todos: [\n          ...state.todos,\n          { id: `todo-${Date.now()}`, completed: false, text: action.payload }\n        ]\n      };\n    case 'DELETE_TODO':\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.payload)\n      };\n    case 'TOGGLE_TODO':\n      return {\n        ...state,\n        todos: state.todos.map(todo => {\n          if (todo.id === action.payload) {\n            return { ...todo, completed: !todo.completed };\n          }\n          return todo;\n        })\n      };\n    case 'SET_EDIT_ID':\n      return {\n        ...state,\n        editId: action.payload\n      };\n    case 'EDIT_TODO':\n      const { editId, todos } = state;\n      return {\n        ...state,\n        todos: todos.map(todo => {\n          if (todo.id === editId) {\n            return { ...todo, text: action.payload };\n          }\n          return todo;\n        })\n      };\n    case 'SET_FILTER':\n      return { ...state, filterBy: action.payload };\n    case 'RESET':\n      return { ...INITIAL_STATE };\n    case 'GET_LOCAL_DATA':\n      return { ...state, ...action.payload };\n    case 'SAVE_DATA':\n    default:\n      return state;\n  }\n};\n\n// actions\nconst addTodo = dispatch => text =>\n  dispatch({ type: 'ADD_TODO', payload: text });\n\nconst deleteTodo = dispatch => id =>\n  dispatch({ type: 'DELETE_TODO', payload: id });\n\nconst toggleTodo = dispatch => id =>\n  dispatch({ type: 'TOGGLE_TODO', payload: id });\n\nconst setEditId = dispatch => id =>\n  dispatch({ type: 'SET_EDIT_ID', payload: id });\n\nconst editTodo = dispatch => text =>\n  dispatch({ type: 'EDIT_TODO', payload: text });\n\nconst setFilter = dispatch => filter =>\n  dispatch({ type: 'SET_FILTER', payload: filter });\n\nconst reset = dispatch => async () => {\n  await AsyncStorage.clear();\n  dispatch({ type: 'RESET' });\n};\n\nconst getLocalData = dispatch => async () => {\n  try {\n    const localData = await AsyncStorage.getItem('DATA');\n    if (localData !== null) {\n      dispatch({ type: 'GET_LOCAL_DATA', payload: JSON.parse(localData) });\n    }\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nconst saveData = dispatch => async data => {\n  try {\n    await AsyncStorage.setItem('DATA', JSON.stringify(data));\n  } catch (e) {\n    console.log(e);\n  }\n  dispatch({ type: 'SAVE_DATA' });\n};\n\nconst { Context, Provider } = createDataContext(\n  todoReducer,\n  {\n    addTodo,\n    deleteTodo,\n    toggleTodo,\n    setEditId,\n    editTodo,\n    setFilter,\n    reset,\n    getLocalData,\n    saveData\n  },\n  { ...INITIAL_STATE }\n);\n\nexport { Context as TodoContext, Provider as TodoProvider };\n"]},"metadata":{},"sourceType":"module"}