{"ast":null,"code":"var _extends2 = require(\"@babel/runtime/helpers/extends\");\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react-native'), require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react-native', 'react'], factory) : (global = global || self, factory(global.ReactNativePopupMenu = {}, global.reactNative, global.React));\n})(this, function (exports, reactNative, React) {\n  'use strict';\n\n  var React__default = 'default' in React ? React['default'] : React;\n\n  if (!reactNative.Platform.select) {\n    reactNative.Platform.select = function (obj) {\n      return obj[reactNative.Platform.OS];\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n        }));\n      }\n\n      ownKeys.forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  var measure = function measure(ref) {\n    return new Promise(function (resolve) {\n      ref.measure(function (x, y, width, height, pageX, pageY) {\n        resolve({\n          x: pageX,\n          y: pageY,\n          width: width,\n          height: height\n        });\n      });\n    });\n  };\n\n  var makeName = function () {\n    var nextID = 1;\n    return function () {\n      return \"menu-\".concat(nextID++);\n    };\n  }();\n\n  function makeTouchable(TouchableComponent) {\n    var Touchable = TouchableComponent || reactNative.Platform.select({\n      android: reactNative.TouchableNativeFeedback,\n      ios: reactNative.TouchableHighlight,\n      default: reactNative.TouchableHighlight\n    });\n    var defaultTouchableProps = {};\n\n    if (Touchable === reactNative.TouchableHighlight) {\n      defaultTouchableProps = {\n        underlayColor: 'rgba(0, 0, 0, 0.1)'\n      };\n    }\n\n    return {\n      Touchable: Touchable,\n      defaultTouchableProps: defaultTouchableProps\n    };\n  }\n\n  function iterator2array(it) {\n    var arr = [];\n\n    for (var next = it.next(); !next.done; next = it.next()) {\n      arr.push(next.value);\n    }\n\n    return arr;\n  }\n\n  function isClassComponent(component) {\n    return component.prototype && !!component.prototype.render;\n  }\n\n  function deprecatedComponent(message) {\n    var methods = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return function deprecatedComponentHOC(Component) {\n      var _temp;\n\n      return _temp = function (_React$Component) {\n        _inherits(DeprecatedComponent, _React$Component);\n\n        function DeprecatedComponent() {\n          var _getPrototypeOf2;\n\n          var _this;\n\n          _classCallCheck(this, DeprecatedComponent);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DeprecatedComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n          _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onRef\", function (ref) {\n            return _this.ref = ref;\n          });\n\n          methods.forEach(function (name) {\n            _this[name] = function () {\n              var _this$ref;\n\n              return _this.ref && (_this$ref = _this.ref)[name].apply(_this$ref, arguments);\n            };\n          });\n          return _this;\n        }\n\n        _createClass(DeprecatedComponent, [{\n          key: \"render\",\n          value: function render() {\n            return React__default.createElement(Component, _extends({}, this.props, {\n              ref: this.onRef\n            }));\n          }\n        }, {\n          key: \"componentDidMount\",\n          value: function componentDidMount() {\n            console.warn(message);\n          }\n        }]);\n\n        return DeprecatedComponent;\n      }(React__default.Component), _temp;\n    };\n  }\n\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n  /*\n  object-assign\n  (c) Sindre Sorhus\n  @license MIT\n  */\n\n\n  var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n  function toObject(val) {\n    if (val === null || val === undefined) {\n      throw new TypeError('Object.assign cannot be called with null or undefined');\n    }\n\n    return Object(val);\n  }\n\n  function shouldUseNative() {\n    try {\n      if (!Object.assign) {\n        return false;\n      }\n\n      var test1 = new String('abc');\n      test1[5] = 'de';\n\n      if (Object.getOwnPropertyNames(test1)[0] === '5') {\n        return false;\n      }\n\n      var test2 = {};\n\n      for (var i = 0; i < 10; i++) {\n        test2['_' + String.fromCharCode(i)] = i;\n      }\n\n      var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n        return test2[n];\n      });\n\n      if (order2.join('') !== '0123456789') {\n        return false;\n      }\n\n      var test3 = {};\n      'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n        test3[letter] = letter;\n      });\n\n      if (Object.keys(_extends2({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n        return false;\n      }\n\n      return true;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  var objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n    var from;\n    var to = toObject(target);\n    var symbols;\n\n    for (var s = 1; s < arguments.length; s++) {\n      from = Object(arguments[s]);\n\n      for (var key in from) {\n        if (hasOwnProperty.call(from, key)) {\n          to[key] = from[key];\n        }\n      }\n\n      if (getOwnPropertySymbols) {\n        symbols = getOwnPropertySymbols(from);\n\n        for (var i = 0; i < symbols.length; i++) {\n          if (propIsEnumerable.call(from, symbols[i])) {\n            to[symbols[i]] = from[symbols[i]];\n          }\n        }\n      }\n    }\n\n    return to;\n  };\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  var printWarning = function printWarning() {};\n\n  {\n    var ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\n    var loggedTypeFailures = {};\n\n    printWarning = function printWarning(text) {\n      var message = 'Warning: ' + text;\n\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n\n      try {\n        throw new Error(message);\n      } catch (x) {}\n    };\n  }\n\n  function checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n    {\n      for (var typeSpecName in typeSpecs) {\n        if (typeSpecs.hasOwnProperty(typeSpecName)) {\n          var error;\n\n          try {\n            if (typeof typeSpecs[typeSpecName] !== 'function') {\n              var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.');\n              err.name = 'Invariant Violation';\n              throw err;\n            }\n\n            error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$1);\n          } catch (ex) {\n            error = ex;\n          }\n\n          if (error && !(error instanceof Error)) {\n            printWarning((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');\n          }\n\n          if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n            loggedTypeFailures[error.message] = true;\n            var stack = getStack ? getStack() : '';\n            printWarning('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));\n          }\n        }\n      }\n    }\n  }\n\n  var checkPropTypes_1 = checkPropTypes;\n\n  var printWarning$1 = function printWarning$1() {};\n\n  {\n    printWarning$1 = function printWarning$1(text) {\n      var message = 'Warning: ' + text;\n\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n\n      try {\n        throw new Error(message);\n      } catch (x) {}\n    };\n  }\n\n  function emptyFunctionThatReturnsNull() {\n    return null;\n  }\n\n  var factoryWithTypeCheckers = function factoryWithTypeCheckers(isValidElement, throwOnDirectAccess) {\n    var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n    var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n    function getIteratorFn(maybeIterable) {\n      var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\n      if (typeof iteratorFn === 'function') {\n        return iteratorFn;\n      }\n    }\n\n    var ANONYMOUS = '<<anonymous>>';\n    var ReactPropTypes = {\n      array: createPrimitiveTypeChecker('array'),\n      bool: createPrimitiveTypeChecker('boolean'),\n      func: createPrimitiveTypeChecker('function'),\n      number: createPrimitiveTypeChecker('number'),\n      object: createPrimitiveTypeChecker('object'),\n      string: createPrimitiveTypeChecker('string'),\n      symbol: createPrimitiveTypeChecker('symbol'),\n      any: createAnyTypeChecker(),\n      arrayOf: createArrayOfTypeChecker,\n      element: createElementTypeChecker(),\n      instanceOf: createInstanceTypeChecker,\n      node: createNodeChecker(),\n      objectOf: createObjectOfTypeChecker,\n      oneOf: createEnumTypeChecker,\n      oneOfType: createUnionTypeChecker,\n      shape: createShapeTypeChecker,\n      exact: createStrictShapeTypeChecker\n    };\n\n    function is(x, y) {\n      if (x === y) {\n        return x !== 0 || 1 / x === 1 / y;\n      } else {\n        return x !== x && y !== y;\n      }\n    }\n\n    function PropTypeError(message) {\n      this.message = message;\n      this.stack = '';\n    }\n\n    PropTypeError.prototype = Error.prototype;\n\n    function createChainableTypeChecker(validate) {\n      {\n        var manualPropTypeCallCache = {};\n        var manualPropTypeWarningCount = 0;\n      }\n\n      function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n        componentName = componentName || ANONYMOUS;\n        propFullName = propFullName || propName;\n\n        if (secret !== ReactPropTypesSecret_1) {\n          if (throwOnDirectAccess) {\n            var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n            err.name = 'Invariant Violation';\n            throw err;\n          } else if (typeof console !== 'undefined') {\n            var cacheKey = componentName + ':' + propName;\n\n            if (!manualPropTypeCallCache[cacheKey] && manualPropTypeWarningCount < 3) {\n              printWarning$1('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');\n              manualPropTypeCallCache[cacheKey] = true;\n              manualPropTypeWarningCount++;\n            }\n          }\n        }\n\n        if (props[propName] == null) {\n          if (isRequired) {\n            if (props[propName] === null) {\n              return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n            }\n\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n          }\n\n          return null;\n        } else {\n          return validate(props, propName, componentName, location, propFullName);\n        }\n      }\n\n      var chainedCheckType = checkType.bind(null, false);\n      chainedCheckType.isRequired = checkType.bind(null, true);\n      return chainedCheckType;\n    }\n\n    function createPrimitiveTypeChecker(expectedType) {\n      function validate(props, propName, componentName, location, propFullName, secret) {\n        var propValue = props[propName];\n        var propType = getPropType(propValue);\n\n        if (propType !== expectedType) {\n          var preciseType = getPreciseType(propValue);\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createAnyTypeChecker() {\n      return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n    }\n\n    function createArrayOfTypeChecker(typeChecker) {\n      function validate(props, propName, componentName, location, propFullName) {\n        if (typeof typeChecker !== 'function') {\n          return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n        }\n\n        var propValue = props[propName];\n\n        if (!Array.isArray(propValue)) {\n          var propType = getPropType(propValue);\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n        }\n\n        for (var i = 0; i < propValue.length; i++) {\n          var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret_1);\n\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createElementTypeChecker() {\n      function validate(props, propName, componentName, location, propFullName) {\n        var propValue = props[propName];\n\n        if (!isValidElement(propValue)) {\n          var propType = getPropType(propValue);\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createInstanceTypeChecker(expectedClass) {\n      function validate(props, propName, componentName, location, propFullName) {\n        if (!(props[propName] instanceof expectedClass)) {\n          var expectedClassName = expectedClass.name || ANONYMOUS;\n          var actualClassName = getClassName(props[propName]);\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createEnumTypeChecker(expectedValues) {\n      if (!Array.isArray(expectedValues)) {\n        printWarning$1('Invalid argument supplied to oneOf, expected an instance of array.');\n        return emptyFunctionThatReturnsNull;\n      }\n\n      function validate(props, propName, componentName, location, propFullName) {\n        var propValue = props[propName];\n\n        for (var i = 0; i < expectedValues.length; i++) {\n          if (is(propValue, expectedValues[i])) {\n            return null;\n          }\n        }\n\n        var valuesString = JSON.stringify(expectedValues);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createObjectOfTypeChecker(typeChecker) {\n      function validate(props, propName, componentName, location, propFullName) {\n        if (typeof typeChecker !== 'function') {\n          return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n        }\n\n        var propValue = props[propName];\n        var propType = getPropType(propValue);\n\n        if (propType !== 'object') {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n        }\n\n        for (var key in propValue) {\n          if (propValue.hasOwnProperty(key)) {\n            var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\n            if (error instanceof Error) {\n              return error;\n            }\n          }\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createUnionTypeChecker(arrayOfTypeCheckers) {\n      if (!Array.isArray(arrayOfTypeCheckers)) {\n        printWarning$1('Invalid argument supplied to oneOfType, expected an instance of array.');\n        return emptyFunctionThatReturnsNull;\n      }\n\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n\n        if (typeof checker !== 'function') {\n          printWarning$1('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');\n          return emptyFunctionThatReturnsNull;\n        }\n      }\n\n      function validate(props, propName, componentName, location, propFullName) {\n        for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n          var checker = arrayOfTypeCheckers[i];\n\n          if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret_1) == null) {\n            return null;\n          }\n        }\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createNodeChecker() {\n      function validate(props, propName, componentName, location, propFullName) {\n        if (!isNode(props[propName])) {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createShapeTypeChecker(shapeTypes) {\n      function validate(props, propName, componentName, location, propFullName) {\n        var propValue = props[propName];\n        var propType = getPropType(propValue);\n\n        if (propType !== 'object') {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n        }\n\n        for (var key in shapeTypes) {\n          var checker = shapeTypes[key];\n\n          if (!checker) {\n            continue;\n          }\n\n          var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\n          if (error) {\n            return error;\n          }\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function createStrictShapeTypeChecker(shapeTypes) {\n      function validate(props, propName, componentName, location, propFullName) {\n        var propValue = props[propName];\n        var propType = getPropType(propValue);\n\n        if (propType !== 'object') {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n        }\n\n        var allKeys = objectAssign({}, props[propName], shapeTypes);\n\n        for (var key in allKeys) {\n          var checker = shapeTypes[key];\n\n          if (!checker) {\n            return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));\n          }\n\n          var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\n          if (error) {\n            return error;\n          }\n        }\n\n        return null;\n      }\n\n      return createChainableTypeChecker(validate);\n    }\n\n    function isNode(propValue) {\n      switch (typeof propValue) {\n        case 'number':\n        case 'string':\n        case 'undefined':\n          return true;\n\n        case 'boolean':\n          return !propValue;\n\n        case 'object':\n          if (Array.isArray(propValue)) {\n            return propValue.every(isNode);\n          }\n\n          if (propValue === null || isValidElement(propValue)) {\n            return true;\n          }\n\n          var iteratorFn = getIteratorFn(propValue);\n\n          if (iteratorFn) {\n            var iterator = iteratorFn.call(propValue);\n            var step;\n\n            if (iteratorFn !== propValue.entries) {\n              while (!(step = iterator.next()).done) {\n                if (!isNode(step.value)) {\n                  return false;\n                }\n              }\n            } else {\n              while (!(step = iterator.next()).done) {\n                var entry = step.value;\n\n                if (entry) {\n                  if (!isNode(entry[1])) {\n                    return false;\n                  }\n                }\n              }\n            }\n          } else {\n            return false;\n          }\n\n          return true;\n\n        default:\n          return false;\n      }\n    }\n\n    function isSymbol(propType, propValue) {\n      if (propType === 'symbol') {\n        return true;\n      }\n\n      if (propValue['@@toStringTag'] === 'Symbol') {\n        return true;\n      }\n\n      if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function getPropType(propValue) {\n      var propType = typeof propValue;\n\n      if (Array.isArray(propValue)) {\n        return 'array';\n      }\n\n      if (propValue instanceof RegExp) {\n        return 'object';\n      }\n\n      if (isSymbol(propType, propValue)) {\n        return 'symbol';\n      }\n\n      return propType;\n    }\n\n    function getPreciseType(propValue) {\n      if (typeof propValue === 'undefined' || propValue === null) {\n        return '' + propValue;\n      }\n\n      var propType = getPropType(propValue);\n\n      if (propType === 'object') {\n        if (propValue instanceof Date) {\n          return 'date';\n        } else if (propValue instanceof RegExp) {\n          return 'regexp';\n        }\n      }\n\n      return propType;\n    }\n\n    function getPostfixForTypeWarning(value) {\n      var type = getPreciseType(value);\n\n      switch (type) {\n        case 'array':\n        case 'object':\n          return 'an ' + type;\n\n        case 'boolean':\n        case 'date':\n        case 'regexp':\n          return 'a ' + type;\n\n        default:\n          return type;\n      }\n    }\n\n    function getClassName(propValue) {\n      if (!propValue.constructor || !propValue.constructor.name) {\n        return ANONYMOUS;\n      }\n\n      return propValue.constructor.name;\n    }\n\n    ReactPropTypes.checkPropTypes = checkPropTypes_1;\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n    {\n      var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element') || 0xeac7;\n\n      var isValidElement = function isValidElement(object) {\n        return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n      };\n\n      var throwOnDirectAccess = true;\n      module.exports = factoryWithTypeCheckers(isValidElement, throwOnDirectAccess);\n    }\n  });\n\n  function withContext(Context) {\n    var propName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"context\";\n    return function wrap(Component) {\n      var EnhanceContext = function (_React$Component) {\n        _inherits(EnhanceContext, _React$Component);\n\n        function EnhanceContext() {\n          _classCallCheck(this, EnhanceContext);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(EnhanceContext).apply(this, arguments));\n        }\n\n        _createClass(EnhanceContext, [{\n          key: \"render\",\n          value: function render() {\n            var _this$props = this.props,\n                forwardedRef = _this$props.forwardedRef,\n                rest = _objectWithoutProperties(_this$props, [\"forwardedRef\"]);\n\n            return React__default.createElement(Context.Consumer, null, function (value) {\n              var _custom;\n\n              var custom = (_custom = {}, _defineProperty(_custom, propName, value), _defineProperty(_custom, \"ref\", forwardedRef), _custom);\n              return React__default.createElement(Component, _extends({}, custom, rest));\n            });\n          }\n        }]);\n\n        return EnhanceContext;\n      }(React__default.Component);\n\n      var name = Component.displayName || Component.name || \"Component\";\n      var consumerName = Context.Consumer.displayName || Context.Consumer.name || \"Context.Consumer\";\n\n      function enhanceForwardRef(props, ref) {\n        return React__default.createElement(EnhanceContext, _extends({}, props, {\n          forwardedRef: ref\n        }));\n      }\n\n      enhanceForwardRef.displayName = \"enhanceContext-\".concat(consumerName, \"(\").concat(name, \")\");\n      var FC = React__default.forwardRef(enhanceForwardRef);\n      FC.defaultProps = Component.defaultProps;\n      FC.propTypes = Component.propTypes;\n      return FC;\n    };\n  }\n\n  function makeMenuRegistry() {\n    var menus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Map();\n\n    function subscribe(instance) {\n      var name = instance.getName();\n\n      if (menus.get(name)) {\n        console.warn(\"incorrect usage of popup menu - menu with name \".concat(name, \" already exists\"));\n      }\n\n      menus.set(name, {\n        name: name,\n        instance: instance\n      });\n    }\n\n    function unsubscribe(instance) {\n      menus.delete(instance.getName());\n    }\n\n    function updateLayoutInfo(name) {\n      var layouts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!menus.has(name)) {\n        return;\n      }\n\n      var menu = _extends2({}, menus.get(name));\n\n      if (layouts.hasOwnProperty('triggerLayout')) {\n        menu.triggerLayout = layouts.triggerLayout;\n      }\n\n      if (layouts.hasOwnProperty('optionsLayout')) {\n        menu.optionsLayout = layouts.optionsLayout;\n      }\n\n      menus.set(name, menu);\n    }\n\n    function setOptionsCustomStyles(name, optionsCustomStyles) {\n      if (!menus.has(name)) {\n        return;\n      }\n\n      var menu = _objectSpread({}, menus.get(name), {\n        optionsCustomStyles: optionsCustomStyles\n      });\n\n      menus.set(name, menu);\n    }\n\n    function getMenu(name) {\n      return menus.get(name);\n    }\n\n    function getAll() {\n      return iterator2array(menus.values());\n    }\n\n    return {\n      subscribe: subscribe,\n      unsubscribe: unsubscribe,\n      updateLayoutInfo: updateLayoutInfo,\n      getMenu: getMenu,\n      getAll: getAll,\n      setOptionsCustomStyles: setOptionsCustomStyles\n    };\n  }\n\n  var OPEN_ANIM_DURATION = 225;\n  var CLOSE_ANIM_DURATION = 195;\n  var USE_NATIVE_DRIVER = reactNative.Platform.OS !== \"web\";\n\n  var Backdrop = function (_Component) {\n    _inherits(Backdrop, _Component);\n\n    function Backdrop() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, Backdrop);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Backdrop)).call.apply(_getPrototypeOf2, [this].concat(args)));\n      _this.fadeAnim = new reactNative.Animated.Value(0.001);\n      return _this;\n    }\n\n    _createClass(Backdrop, [{\n      key: \"open\",\n      value: function open() {\n        var _this2 = this;\n\n        return new Promise(function (resolve) {\n          reactNative.Animated.timing(_this2.fadeAnim, {\n            duration: OPEN_ANIM_DURATION,\n            toValue: 1,\n            useNativeDriver: USE_NATIVE_DRIVER\n          }).start(resolve);\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this3 = this;\n\n        return new Promise(function (resolve) {\n          reactNative.Animated.timing(_this3.fadeAnim, {\n            duration: CLOSE_ANIM_DURATION,\n            toValue: 0,\n            useNativeDriver: USE_NATIVE_DRIVER\n          }).start(resolve);\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            onPress = _this$props.onPress,\n            style = _this$props.style;\n        return React__default.createElement(reactNative.TouchableWithoutFeedback, {\n          onPress: onPress\n        }, React__default.createElement(reactNative.Animated.View, {\n          style: [styles.fullscreen, {\n            opacity: this.fadeAnim\n          }]\n        }, React__default.createElement(reactNative.View, {\n          style: [styles.fullscreen, style]\n        })));\n      }\n    }]);\n\n    return Backdrop;\n  }(React.Component);\n\n  Backdrop.propTypes = {\n    onPress: propTypes.func.isRequired\n  };\n  var styles = reactNative.StyleSheet.create({\n    fullscreen: {\n      opacity: 0,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0\n    }\n  });\n  var CFG = {\n    debug: false\n  };\n\n  var debug = function debug() {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    CFG.debug && (_console = console).log.apply(_console, ['react-native-popup-menu'].concat(args));\n  };\n\n  var MenuPlaceholder = function (_Component) {\n    _inherits(MenuPlaceholder, _Component);\n\n    function MenuPlaceholder(props) {\n      var _this;\n\n      _classCallCheck(this, MenuPlaceholder);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuPlaceholder).call(this, props));\n      _this.state = {};\n      return _this;\n    }\n\n    _createClass(MenuPlaceholder, [{\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate() {\n        return !this.props.ctx._isMenuClosing;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            ctx = _this$props.ctx,\n            backdropStyles = _this$props.backdropStyles;\n\n        var shouldRenderMenu = ctx.isMenuOpen() && ctx._isInitialized();\n\n        debug('MenuPlaceholder should render', shouldRenderMenu);\n\n        if (!shouldRenderMenu) {\n          return null;\n        }\n\n        return React__default.createElement(reactNative.View, {\n          style: styles$1.placeholder\n        }, React__default.createElement(Backdrop, {\n          onPress: ctx._onBackdropPress,\n          style: backdropStyles,\n          ref: ctx.onBackdropRef\n        }), ctx._makeOptions());\n      }\n    }]);\n\n    return MenuPlaceholder;\n  }(React.Component);\n\n  var styles$1 = reactNative.StyleSheet.create({\n    placeholder: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      overflow: 'hidden'\n    }\n  });\n\n  var computePosition = function computePosition(_ref) {\n    var windowLayout = _ref.windowLayout;\n    return {\n      top: windowLayout.height,\n      left: windowLayout.width\n    };\n  };\n\n  var MenuOutside = function MenuOutside(props) {\n    var style = props.style,\n        children = props.children,\n        layouts = props.layouts,\n        other = _objectWithoutProperties(props, [\"style\", \"children\", \"layouts\"]);\n\n    var position = computePosition(layouts);\n    return React__default.createElement(reactNative.View, _extends({}, other, {\n      style: [styles$2.options, style, position],\n      collapsable: false\n    }), children);\n  };\n\n  var styles$2 = reactNative.StyleSheet.create({\n    options: {\n      position: 'absolute'\n    }\n  });\n\n  var defaultOptionsContainerRenderer = function defaultOptionsContainerRenderer(options) {\n    return options;\n  };\n\n  var layoutsEqual = function layoutsEqual(a, b) {\n    return a === b || a && b && a.width === b.width && a.height === b.height;\n  };\n\n  if (!React__default.forwardRef) {\n    throw new Error('This version of popup-menu requires RN 0.55+. Check our compatibility table.');\n  }\n\n  var PopupMenuContext = React.createContext({});\n  var withCtx = withContext(PopupMenuContext, \"ctx\");\n  var instanceCount = 0;\n\n  var MenuProvider = function (_Component) {\n    _inherits(MenuProvider, _Component);\n\n    function MenuProvider(props) {\n      var _this;\n\n      _classCallCheck(this, MenuProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuProvider).call(this, props));\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_handleBackButton\", function () {\n        var backHandler = _this.props.backHandler;\n        debug('_handleBackButton called', backHandler);\n\n        if (backHandler === true) {\n          if (_this.isMenuOpen()) {\n            _this.closeMenu();\n\n            return true;\n          }\n        }\n\n        if (typeof backHandler === 'function') {\n          return backHandler(_assertThisInitialized(_assertThisInitialized(_this)));\n        }\n\n        return false;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onBackdropRef\", function (r) {\n        _this.backdropRef = r;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onOptionsRef\", function (r) {\n        _this.optionsRef = r;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_onPlaceholderRef\", function (r) {\n        return _this._placeholderRef = r;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_onBackdropPress\", function () {\n        debug('on backdrop press');\n\n        var menu = _this._getOpenedMenu();\n\n        if (menu) {\n          menu.instance.props.onBackdropPress();\n        }\n\n        _this.closeMenu();\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_onLayout\", function (_ref) {\n        var layout = _ref.nativeEvent.layout;\n\n        if (layoutsEqual(_this._ownLayout, layout)) {\n          return;\n        }\n\n        _this._ownLayout = layout;\n        debug('context layout has changed', _this._ownLayout);\n\n        if (!_this.isMenuOpen()) {\n          return;\n        }\n\n        var _this$_getOpenedMenu = _this._getOpenedMenu(),\n            instance = _this$_getOpenedMenu.instance;\n\n        var trigger = instance._getTrigger();\n\n        measure(trigger).then(function (triggerLayout) {\n          debug('got trigger measurements after context layout change', triggerLayout);\n\n          _this._menuRegistry.updateLayoutInfo(instance.getName(), {\n            triggerLayout: triggerLayout\n          });\n\n          _this._notify(true);\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_onSafeAreaLayout\", function (_ref2) {\n        var layout = _ref2.nativeEvent.layout;\n\n        if (layoutsEqual(_this._safeAreaLayout, layout)) {\n          return;\n        }\n\n        _this._safeAreaLayout = layout;\n        debug('safeArea layout has changed', _this._safeAreaLayout);\n\n        if (!_this.isMenuOpen()) {\n          return;\n        }\n\n        _this._notify(true);\n      });\n\n      _this._menuRegistry = makeMenuRegistry();\n      _this._isMenuClosing = false;\n      var menuActions = {\n        openMenu: function openMenu(name) {\n          return _this.openMenu(name);\n        },\n        closeMenu: function closeMenu() {\n          return _this.closeMenu();\n        },\n        toggleMenu: function toggleMenu(name) {\n          return _this.toggleMenu(name);\n        },\n        isMenuOpen: function isMenuOpen() {\n          return _this.isMenuOpen();\n        },\n        _getOpenedMenu: function _getOpenedMenu() {\n          return _this._getOpenedMenu();\n        },\n        _notify: function _notify(force) {\n          return _this._notify(force);\n        }\n      };\n      _this.menuCtx = {\n        menuRegistry: _this._menuRegistry,\n        menuActions: menuActions\n      };\n      return _this;\n    }\n\n    _createClass(MenuProvider, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (reactNative.BackHandler) {\n          reactNative.BackHandler.addEventListener('hardwareBackPress', this._handleBackButton);\n        } else {\n          var backHandler = this.props.backHandler;\n\n          if (backHandler === true || typeof backHandler === 'function') {\n            console.warn('backHandler prop cannot be used if BackHandler is not present (RN >= 0.44 required)');\n          }\n        }\n\n        var _this$props = this.props,\n            customStyles = _this$props.customStyles,\n            skipInstanceCheck = _this$props.skipInstanceCheck;\n\n        if (customStyles.menuContextWrapper) {\n          console.warn('menuContextWrapper custom style is deprecated and it might be removed in future releases, use menuProviderWrapper instead.');\n        }\n\n        if (!skipInstanceCheck) {\n          instanceCount++;\n        }\n\n        if (instanceCount > 1) {\n          console.warn('In most cases you should not have more MenuProviders in your app (see API documentation). In other cases use skipInstanceCheck prop.');\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        debug('unmounting menu provider');\n\n        if (reactNative.BackHandler) {\n          reactNative.BackHandler.removeEventListener('hardwareBackPress', this._handleBackButton);\n        }\n\n        var skipInstanceCheck = this.props.skipInstanceCheck;\n\n        if (!skipInstanceCheck) {\n          instanceCount--;\n        }\n      }\n    }, {\n      key: \"isMenuOpen\",\n      value: function isMenuOpen() {\n        return !!this._getOpenedMenu();\n      }\n    }, {\n      key: \"openMenu\",\n      value: function openMenu(name) {\n        var menu = this._menuRegistry.getMenu(name);\n\n        if (!menu) {\n          console.warn(\"menu with name \".concat(name, \" does not exist\"));\n          return Promise.resolve();\n        }\n\n        debug('open menu', name);\n\n        menu.instance._setOpened(true);\n\n        return this._notify();\n      }\n    }, {\n      key: \"closeMenu\",\n      value: function closeMenu() {\n        debug('close menu');\n\n        this._menuRegistry.getAll().filter(function (menu) {\n          return menu.instance._getOpened();\n        }).forEach(function (menu) {\n          return menu.instance._setOpened(false);\n        });\n\n        return this._notify();\n      }\n    }, {\n      key: \"_invalidateTriggerLayouts\",\n      value: function _invalidateTriggerLayouts() {\n        var _this2 = this;\n\n        this._menuRegistry.getAll().filter(function (menu) {\n          return !menu.instance.isOpen();\n        }).forEach(function (menu) {\n          _this2._menuRegistry.updateLayoutInfo(menu.name, {\n            triggerLayout: undefined\n          });\n        });\n      }\n    }, {\n      key: \"_beforeClose\",\n      value: function _beforeClose(menu) {\n        var _this3 = this;\n\n        debug('before close', menu.name);\n        var hideMenu = this.optionsRef && this.optionsRef.close && this.optionsRef.close() || Promise.resolve();\n        var hideBackdrop = this.backdropRef && this.backdropRef.close();\n\n        this._invalidateTriggerLayouts();\n\n        this._isMenuClosing = true;\n        return Promise.all([hideMenu, hideBackdrop]).then(function () {\n          _this3._isMenuClosing = false;\n        }).catch(function (err) {\n          _this3._isMenuClosing = false;\n          throw err;\n        });\n      }\n    }, {\n      key: \"toggleMenu\",\n      value: function toggleMenu(name) {\n        var menu = this._menuRegistry.getMenu(name);\n\n        if (!menu) {\n          console.warn(\"menu with name \".concat(name, \" does not exist\"));\n          return Promise.resolve();\n        }\n\n        debug('toggle menu', name);\n\n        if (menu.instance._getOpened()) {\n          return this.closeMenu();\n        } else {\n          return this.openMenu(name);\n        }\n      }\n    }, {\n      key: \"_notify\",\n      value: function _notify(forceUpdate) {\n        var _this4 = this;\n\n        var NULL = {};\n        var prev = this.openedMenu || NULL;\n        var next = this._menuRegistry.getAll().find(function (menu) {\n          return menu.instance.isOpen();\n        }) || NULL;\n        this.openedMenu = next === NULL ? undefined : next;\n\n        if (!forceUpdate && !this._isRenderNeeded(prev, next)) {\n          return Promise.resolve();\n        }\n\n        debug('notify: next menu:', next.name, ' prev menu:', prev.name);\n        var afterSetState = undefined;\n\n        var beforeSetState = function beforeSetState() {\n          return Promise.resolve();\n        };\n\n        if (prev.name !== next.name) {\n          if (prev !== NULL && !prev.instance.isOpen()) {\n            beforeSetState = function beforeSetState() {\n              return _this4._beforeClose(prev).then(function () {\n                return prev.instance.props.onClose();\n              });\n            };\n          }\n\n          if (next !== NULL) {\n            next.instance.props.onOpen();\n\n            afterSetState = function afterSetState() {\n              return _this4._initOpen(next);\n            };\n          }\n        }\n\n        return beforeSetState().then(function () {\n          if (!_this4._placeholderRef) {\n            debug('setState ignored - maybe the context was unmounted');\n            return;\n          }\n\n          _this4._placeholderRef.setState({\n            openedMenuName: _this4.openedMenu && _this4.openedMenu.name\n          }, afterSetState);\n\n          debug('notify ended');\n        });\n      }\n    }, {\n      key: \"_isRenderNeeded\",\n      value: function _isRenderNeeded(prev, next) {\n        if (prev === next) {\n          debug('_isRenderNeeded: skipping - no change');\n          return false;\n        }\n\n        if (prev.name !== next.name) {\n          return true;\n        }\n\n        var triggerLayout = next.triggerLayout,\n            optionsLayout = next.optionsLayout;\n\n        if (!triggerLayout || !optionsLayout) {\n          debug('_isRenderNeeded: skipping - no trigger or options layout');\n          return false;\n        }\n\n        return true;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props2 = this.props,\n            style = _this$props2.style,\n            customStyles = _this$props2.customStyles;\n        debug('render menu', this.isMenuOpen(), this._ownLayout);\n        return React__default.createElement(PopupMenuContext.Provider, {\n          value: this.menuCtx\n        }, React__default.createElement(reactNative.View, {\n          style: styles$3.flex1,\n          onLayout: this._onLayout\n        }, React__default.createElement(reactNative.View, {\n          style: [styles$3.flex1, customStyles.menuContextWrapper, customStyles.menuProviderWrapper, style]\n        }, this.props.children), React__default.createElement(reactNative.SafeAreaView, {\n          style: styles$3.safeArea,\n          pointerEvents: \"box-none\"\n        }, React__default.createElement(reactNative.View, {\n          style: styles$3.flex1,\n          collapsable: false,\n          pointerEvents: \"box-none\",\n          onLayout: this._onSafeAreaLayout\n        }), React__default.createElement(MenuPlaceholder, {\n          ctx: this,\n          backdropStyles: customStyles.backdrop,\n          ref: this._onPlaceholderRef\n        }))));\n      }\n    }, {\n      key: \"_getOpenedMenu\",\n      value: function _getOpenedMenu() {\n        var name = this._placeholderRef && this._placeholderRef.state.openedMenuName;\n        var menu = name ? this._menuRegistry.getMenu(name) : undefined;\n        debug('_getOpenedMenu', name, !!menu);\n        return menu;\n      }\n    }, {\n      key: \"_isInitialized\",\n      value: function _isInitialized() {\n        return !!this._ownLayout;\n      }\n    }, {\n      key: \"_initOpen\",\n      value: function _initOpen(menu) {\n        var _this5 = this;\n\n        debug('opening', menu.name);\n\n        var trigger = menu.instance._getTrigger();\n\n        measure(trigger).then(function (triggerLayout) {\n          debug('got trigger measurements', triggerLayout);\n\n          _this5._menuRegistry.updateLayoutInfo(menu.name, {\n            triggerLayout: triggerLayout\n          });\n\n          _this5.backdropRef && _this5.backdropRef.open();\n\n          _this5._notify();\n        });\n      }\n    }, {\n      key: \"_onOptionsLayout\",\n      value: function _onOptionsLayout(e, name, isOutside) {\n        var optionsLayout = e.nativeEvent.layout;\n        optionsLayout.isOutside = isOutside;\n        debug('got options layout', optionsLayout);\n\n        this._menuRegistry.updateLayoutInfo(name, {\n          optionsLayout: optionsLayout\n        });\n\n        this._notify();\n      }\n    }, {\n      key: \"_makeOptions\",\n      value: function _makeOptions() {\n        var _this6 = this;\n\n        var _this$_getOpenedMenu2 = this._getOpenedMenu(),\n            instance = _this$_getOpenedMenu2.instance,\n            triggerLayout = _this$_getOpenedMenu2.triggerLayout,\n            optionsLayout = _this$_getOpenedMenu2.optionsLayout;\n\n        var options = instance._getOptions();\n\n        var _instance$props = instance.props,\n            renderer = _instance$props.renderer,\n            rendererProps = _instance$props.rendererProps;\n        var windowLayout = this._ownLayout;\n        var safeAreaLayout = this._safeAreaLayout;\n        var _options$props = options.props,\n            optionsContainerStyle = _options$props.optionsContainerStyle,\n            renderOptionsContainer = _options$props.renderOptionsContainer,\n            customStyles = _options$props.customStyles;\n        var optionsRenderer = renderOptionsContainer || defaultOptionsContainerRenderer;\n        var isOutside = !triggerLayout || !optionsLayout;\n\n        var onLayout = function onLayout(e) {\n          return _this6._onOptionsLayout(e, instance.getName(), isOutside);\n        };\n\n        var style = [optionsContainerStyle, customStyles.optionsContainer];\n        var layouts = {\n          windowLayout: windowLayout,\n          triggerLayout: triggerLayout,\n          optionsLayout: optionsLayout,\n          safeAreaLayout: safeAreaLayout\n        };\n\n        var props = _objectSpread({}, rendererProps, {\n          style: style,\n          onLayout: onLayout,\n          layouts: layouts\n        });\n\n        var optionsType = isOutside ? MenuOutside : renderer;\n\n        if (isClassComponent(optionsType)) {\n          props.ref = this.onOptionsRef;\n        }\n\n        return React__default.createElement(optionsType, props, optionsRenderer(options));\n      }\n    }]);\n\n    return MenuProvider;\n  }(React.Component);\n\n  MenuProvider.propTypes = {\n    customStyles: propTypes.object,\n    backHandler: propTypes.oneOfType([propTypes.bool, propTypes.func]),\n    skipInstanceCheck: propTypes.bool\n  };\n  MenuProvider.defaultProps = {\n    customStyles: {},\n    backHandler: false,\n    skipInstanceCheck: false\n  };\n  var styles$3 = reactNative.StyleSheet.create({\n    flex1: {\n      flex: 1\n    },\n    safeArea: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0\n    }\n  });\n\n  var MenuOptions = function (_React$Component) {\n    _inherits(MenuOptions, _React$Component);\n\n    function MenuOptions() {\n      _classCallCheck(this, MenuOptions);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(MenuOptions).apply(this, arguments));\n    }\n\n    _createClass(MenuOptions, [{\n      key: \"updateCustomStyles\",\n      value: function updateCustomStyles(_props) {\n        var customStyles = _props.customStyles;\n\n        var menu = this.props.ctx.menuActions._getOpenedMenu();\n\n        if (!menu) return;\n        var menuName = menu.instance.getName();\n        this.props.ctx.menuRegistry.setOptionsCustomStyles(menuName, customStyles);\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.updateCustomStyles(this.props);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate() {\n        this.updateCustomStyles(this.props);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            customStyles = _this$props.customStyles,\n            style = _this$props.style,\n            children = _this$props.children;\n        return React__default.createElement(reactNative.View, {\n          style: [customStyles.optionsWrapper, style]\n        }, children);\n      }\n    }]);\n\n    return MenuOptions;\n  }(React__default.Component);\n\n  MenuOptions.propTypes = {\n    customStyles: propTypes.object,\n    renderOptionsContainer: propTypes.func,\n    optionsContainerStyle: propTypes.oneOfType([propTypes.object, propTypes.number, propTypes.array])\n  };\n  MenuOptions.defaultProps = {\n    customStyles: {}\n  };\n  var MenuOptions$1 = withCtx(MenuOptions);\n\n  var MenuTrigger = function (_Component) {\n    _inherits(MenuTrigger, _Component);\n\n    function MenuTrigger() {\n      _classCallCheck(this, MenuTrigger);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(MenuTrigger).apply(this, arguments));\n    }\n\n    _createClass(MenuTrigger, [{\n      key: \"_onPress\",\n      value: function _onPress() {\n        debug('trigger onPress');\n        this.props.onPress && this.props.onPress();\n        this.props.ctx.menuActions.openMenu(this.props.menuName);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this = this;\n\n        var _this$props = this.props,\n            disabled = _this$props.disabled,\n            onRef = _this$props.onRef,\n            text = _this$props.text,\n            children = _this$props.children,\n            style = _this$props.style,\n            customStyles = _this$props.customStyles,\n            menuName = _this$props.menuName,\n            triggerOnLongPress = _this$props.triggerOnLongPress,\n            onAlternativeAction = _this$props.onAlternativeAction,\n            testID = _this$props.testID,\n            other = _objectWithoutProperties(_this$props, [\"disabled\", \"onRef\", \"text\", \"children\", \"style\", \"customStyles\", \"menuName\", \"triggerOnLongPress\", \"onAlternativeAction\", \"testID\"]);\n\n        var onPress = function onPress() {\n          return !disabled && _this._onPress();\n        };\n\n        var _makeTouchable = makeTouchable(customStyles.TriggerTouchableComponent),\n            Touchable = _makeTouchable.Touchable,\n            defaultTouchableProps = _makeTouchable.defaultTouchableProps;\n\n        return React__default.createElement(reactNative.View, {\n          ref: onRef,\n          collapsable: false,\n          style: customStyles.triggerOuterWrapper\n        }, React__default.createElement(Touchable, _extends({\n          testID: testID,\n          onPress: triggerOnLongPress ? onAlternativeAction : onPress,\n          onLongPress: triggerOnLongPress ? onPress : onAlternativeAction\n        }, defaultTouchableProps, customStyles.triggerTouchable), React__default.createElement(reactNative.View, _extends({}, other, {\n          style: [customStyles.triggerWrapper, style]\n        }), text ? React__default.createElement(reactNative.Text, {\n          style: customStyles.triggerText\n        }, text) : children)));\n      }\n    }]);\n\n    return MenuTrigger;\n  }(React.Component);\n\n  MenuTrigger.propTypes = {\n    disabled: propTypes.bool,\n    text: propTypes.string,\n    onPress: propTypes.func,\n    onAlternativeAction: propTypes.func,\n    customStyles: propTypes.object,\n    triggerOnLongPress: propTypes.bool,\n    testID: propTypes.string\n  };\n  MenuTrigger.defaultProps = {\n    disabled: false,\n    customStyles: {},\n    testID: undefined\n  };\n  var MenuTrigger$1 = withCtx(MenuTrigger);\n\n  var axisPosition = function axisPosition(oDim, wDim, tPos, tDim) {\n    if (oDim > wDim) {\n      return 0;\n    }\n\n    if (tPos + oDim <= wDim) {\n      return tPos;\n    }\n\n    if (tPos + tDim - oDim >= 0) {\n      return tPos + tDim - oDim;\n    }\n\n    var pos = Math.round(tPos + tDim / 2 - oDim / 2);\n\n    if (pos < 0) {\n      return 0;\n    }\n\n    if (pos + oDim > wDim) {\n      return wDim - oDim;\n    }\n\n    return pos;\n  };\n\n  function fit(pos, len, minPos, maxPos) {\n    if (pos === undefined) {\n      return undefined;\n    }\n\n    if (pos + len > maxPos) {\n      pos = maxPos - len;\n    }\n\n    if (pos < minPos) {\n      pos = minPos;\n    }\n\n    return pos;\n  }\n\n  var fitPositionIntoSafeArea = function fitPositionIntoSafeArea(position, layouts) {\n    var windowLayout = layouts.windowLayout,\n        safeAreaLayout = layouts.safeAreaLayout,\n        optionsLayout = layouts.optionsLayout;\n\n    if (!safeAreaLayout) {\n      return position;\n    }\n\n    var saX = safeAreaLayout.x,\n        saY = safeAreaLayout.y,\n        saHeight = safeAreaLayout.height,\n        saWidth = safeAreaLayout.width;\n    var oHeight = optionsLayout.height,\n        oWidth = optionsLayout.width;\n    var wWidth = windowLayout.width;\n    var top = position.top,\n        left = position.left,\n        right = position.right;\n    top = fit(top, oHeight, saY, saY + saHeight);\n    left = fit(left, oWidth, saX, saX + saWidth);\n    right = fit(right, oWidth, wWidth - saX - saWidth, saX);\n    return {\n      top: top,\n      left: left,\n      right: right\n    };\n  };\n\n  var computePosition$1 = function computePosition(layouts, isRTL) {\n    var windowLayout = layouts.windowLayout,\n        triggerLayout = layouts.triggerLayout,\n        optionsLayout = layouts.optionsLayout;\n    var wX = windowLayout.x,\n        wY = windowLayout.y,\n        wWidth = windowLayout.width,\n        wHeight = windowLayout.height;\n    var tX = triggerLayout.x,\n        tY = triggerLayout.y,\n        tHeight = triggerLayout.height,\n        tWidth = triggerLayout.width;\n    var oHeight = optionsLayout.height,\n        oWidth = optionsLayout.width;\n    var top = axisPosition(oHeight, wHeight, tY - wY, tHeight);\n    var left = axisPosition(oWidth, wWidth, tX - wX, tWidth);\n    var start = isRTL ? 'right' : 'left';\n\n    var position = _defineProperty({\n      top: top\n    }, start, left);\n\n    return fitPositionIntoSafeArea(position, layouts);\n  };\n\n  var ContextMenu = function (_React$Component) {\n    _inherits(ContextMenu, _React$Component);\n\n    function ContextMenu(props) {\n      var _this;\n\n      _classCallCheck(this, ContextMenu);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(ContextMenu).call(this, props));\n      _this.state = {\n        scaleAnim: new reactNative.Animated.Value(0.1)\n      };\n      return _this;\n    }\n\n    _createClass(ContextMenu, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        reactNative.Animated.timing(this.state.scaleAnim, {\n          duration: OPEN_ANIM_DURATION,\n          toValue: 1,\n          easing: reactNative.Easing.out(reactNative.Easing.cubic),\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this2 = this;\n\n        return new Promise(function (resolve) {\n          reactNative.Animated.timing(_this2.state.scaleAnim, {\n            duration: CLOSE_ANIM_DURATION,\n            toValue: 0,\n            easing: reactNative.Easing.in(reactNative.Easing.cubic),\n            useNativeDriver: USE_NATIVE_DRIVER\n          }).start(resolve);\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            style = _this$props.style,\n            children = _this$props.children,\n            layouts = _this$props.layouts,\n            other = _objectWithoutProperties(_this$props, [\"style\", \"children\", \"layouts\"]);\n\n        var animation = {\n          transform: [{\n            scale: this.state.scaleAnim\n          }],\n          opacity: this.state.scaleAnim\n        };\n        var position = computePosition$1(layouts, reactNative.I18nManager.isRTL);\n        return React__default.createElement(reactNative.Animated.View, _extends({}, other, {\n          style: [styles$4.options, style, animation, position]\n        }), children);\n      }\n    }]);\n\n    return ContextMenu;\n  }(React__default.Component);\n\n  ContextMenu.computePosition = computePosition$1;\n  ContextMenu.fitPositionIntoSafeArea = fitPositionIntoSafeArea;\n  var styles$4 = reactNative.StyleSheet.create({\n    options: {\n      position: 'absolute',\n      borderRadius: 2,\n      backgroundColor: 'white',\n      width: reactNative.PixelRatio.roundToNearestPixel(200),\n      shadowColor: 'black',\n      shadowOpacity: 0.3,\n      shadowOffset: {\n        width: 3,\n        height: 3\n      },\n      shadowRadius: 4,\n      elevation: 5\n    }\n  });\n\n  var isRegularComponent = function isRegularComponent(c) {\n    return c.type !== MenuOptions$1 && c.type !== MenuTrigger$1;\n  };\n\n  var isTrigger = function isTrigger(c) {\n    return c.type === MenuTrigger$1;\n  };\n\n  var isMenuOptions = function isMenuOptions(c) {\n    return c.type === MenuOptions$1;\n  };\n\n  var Menu = function (_Component) {\n    _inherits(Menu, _Component);\n\n    function Menu(props) {\n      var _this;\n\n      _classCallCheck(this, Menu);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Menu).call(this, props));\n      _this._name = _this.props.name || makeName();\n      _this._forceClose = false;\n      var ctx = props.ctx;\n\n      if (!(ctx && ctx.menuActions)) {\n        throw new Error(\"Menu component must be ancestor of MenuProvider\");\n      }\n\n      return _this;\n    }\n\n    _createClass(Menu, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (!this._validateChildren()) {\n          return;\n        }\n\n        debug('subscribing menu', this._name);\n        this.props.ctx.menuRegistry.subscribe(this);\n\n        this.props.ctx.menuActions._notify();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (this.props.name !== prevProps.name) {\n          console.warn('Menu name cannot be changed');\n        }\n\n        var force = this.isOpen();\n        debug('component did update', this._name, force);\n\n        this.props.ctx.menuActions._notify(force);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        debug('unsubscribing menu', this._name);\n\n        if (this.isOpen()) {\n          this._forceClose = true;\n\n          this.props.ctx.menuActions._notify();\n        }\n\n        this.props.ctx.menuRegistry.unsubscribe(this);\n      }\n    }, {\n      key: \"open\",\n      value: function open() {\n        return this.props.ctx.menuActions.openMenu(this._name);\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        return this.props.ctx.menuActions.closeMenu();\n      }\n    }, {\n      key: \"isOpen\",\n      value: function isOpen() {\n        if (this._forceClose) {\n          return false;\n        }\n\n        return this.props.hasOwnProperty('opened') ? this.props.opened : this._opened;\n      }\n    }, {\n      key: \"getName\",\n      value: function getName() {\n        return this._name;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var style = this.props.style;\n\n        var children = this._reduceChildren();\n\n        return React__default.createElement(reactNative.View, {\n          style: style\n        }, children);\n      }\n    }, {\n      key: \"_reduceChildren\",\n      value: function _reduceChildren() {\n        var _this2 = this;\n\n        return React__default.Children.toArray(this.props.children).reduce(function (r, child) {\n          if (isTrigger(child)) {\n            r.push(React__default.cloneElement(child, {\n              key: null,\n              menuName: _this2._name,\n              onRef: function onRef(t) {\n                return _this2._trigger = t;\n              }\n            }));\n          }\n\n          if (isRegularComponent(child)) {\n            r.push(child);\n          }\n\n          return r;\n        }, []);\n      }\n    }, {\n      key: \"_getTrigger\",\n      value: function _getTrigger() {\n        return this._trigger;\n      }\n    }, {\n      key: \"_getOptions\",\n      value: function _getOptions() {\n        return React__default.Children.toArray(this.props.children).find(isMenuOptions);\n      }\n    }, {\n      key: \"_getOpened\",\n      value: function _getOpened() {\n        return this._opened;\n      }\n    }, {\n      key: \"_setOpened\",\n      value: function _setOpened(opened) {\n        this._opened = opened;\n      }\n    }, {\n      key: \"_validateChildren\",\n      value: function _validateChildren() {\n        var children = React__default.Children.toArray(this.props.children);\n        var options = children.find(isMenuOptions);\n\n        if (!options) {\n          console.warn('Menu has to contain MenuOptions component');\n        }\n\n        var trigger = children.find(isTrigger);\n\n        if (!trigger) {\n          console.warn('Menu has to contain MenuTrigger component');\n        }\n\n        return options && trigger;\n      }\n    }]);\n\n    return Menu;\n  }(React.Component);\n\n  Menu.propTypes = {\n    name: propTypes.string,\n    renderer: propTypes.func,\n    rendererProps: propTypes.object,\n    onSelect: propTypes.func,\n    onOpen: propTypes.func,\n    onClose: propTypes.func,\n    opened: propTypes.bool,\n    onBackdropPress: propTypes.func\n  };\n  Menu.defaultProps = {\n    renderer: ContextMenu,\n    rendererProps: {},\n    onSelect: function onSelect() {},\n    onOpen: function onOpen() {},\n    onClose: function onClose() {},\n    onBackdropPress: function onBackdropPress() {}\n  };\n  var MenuExternal = withCtx(Menu);\n  Object.defineProperty(MenuExternal, 'debug', {\n    get: function get() {\n      return CFG.debug;\n    },\n    set: function set(val) {\n      CFG.debug = val;\n    }\n  });\n\n  MenuExternal.setDefaultRenderer = function (renderer) {\n    Menu.defaultProps.renderer = renderer;\n  };\n\n  MenuExternal.setDefaultRendererProps = function (rendererProps) {\n    Menu.defaultProps.rendererProps = rendererProps;\n  };\n\n  var MenuOption = function (_Component) {\n    _inherits(MenuOption, _Component);\n\n    function MenuOption() {\n      _classCallCheck(this, MenuOption);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(MenuOption).apply(this, arguments));\n    }\n\n    _createClass(MenuOption, [{\n      key: \"_onSelect\",\n      value: function _onSelect() {\n        var value = this.props.value;\n\n        var onSelect = this.props.onSelect || this._getMenusOnSelect();\n\n        var shouldClose = onSelect(value) !== false;\n        debug('select option', value, shouldClose);\n\n        if (shouldClose) {\n          this.props.ctx.menuActions.closeMenu();\n        }\n      }\n    }, {\n      key: \"_getMenusOnSelect\",\n      value: function _getMenusOnSelect() {\n        var menu = this.props.ctx.menuActions._getOpenedMenu();\n\n        return menu.instance.props.onSelect;\n      }\n    }, {\n      key: \"_getCustomStyles\",\n      value: function _getCustomStyles() {\n        var menu = this.props.ctx.menuActions._getOpenedMenu() || {};\n        var optionsCustomStyles = menu.optionsCustomStyles;\n        return _objectSpread({}, optionsCustomStyles, this.props.customStyles);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this = this;\n\n        var _this$props = this.props,\n            text = _this$props.text,\n            disabled = _this$props.disabled,\n            disableTouchable = _this$props.disableTouchable,\n            children = _this$props.children,\n            style = _this$props.style,\n            testID = _this$props.testID;\n\n        var customStyles = this._getCustomStyles();\n\n        if (text && React__default.Children.count(children) > 0) {\n          console.warn(\"MenuOption: Please don't use text property together with explicit children. Children are ignored.\");\n        }\n\n        if (disabled) {\n          var disabledStyles = [defaultStyles.optionTextDisabled, customStyles.optionText];\n          return React__default.createElement(reactNative.View, {\n            style: [defaultStyles.option, customStyles.optionWrapper, style]\n          }, text ? React__default.createElement(reactNative.Text, {\n            style: disabledStyles\n          }, text) : children);\n        }\n\n        var rendered = React__default.createElement(reactNative.View, {\n          style: [defaultStyles.option, customStyles.optionWrapper, style]\n        }, text ? React__default.createElement(reactNative.Text, {\n          style: customStyles.optionText\n        }, text) : children);\n\n        if (disableTouchable) {\n          return rendered;\n        } else {\n          var _makeTouchable = makeTouchable(customStyles.OptionTouchableComponent),\n              Touchable = _makeTouchable.Touchable,\n              defaultTouchableProps = _makeTouchable.defaultTouchableProps;\n\n          return React__default.createElement(Touchable, _extends({\n            testID: testID,\n            onPress: function onPress() {\n              return _this._onSelect();\n            }\n          }, defaultTouchableProps, customStyles.optionTouchable), rendered);\n        }\n      }\n    }]);\n\n    return MenuOption;\n  }(React.Component);\n\n  MenuOption.propTypes = {\n    disabled: propTypes.bool,\n    disableTouchable: propTypes.bool,\n    onSelect: propTypes.func,\n    text: propTypes.string,\n    value: propTypes.any,\n    customStyles: propTypes.object,\n    testID: propTypes.string\n  };\n  MenuOption.defaultProps = {\n    disabled: false,\n    disableTouchable: false,\n    customStyles: {},\n    testID: undefined\n  };\n  var defaultStyles = reactNative.StyleSheet.create({\n    option: {\n      padding: 5,\n      backgroundColor: 'transparent'\n    },\n    optionTextDisabled: {\n      color: '#ccc'\n    }\n  });\n  var MenuOption$1 = withCtx(MenuOption);\n\n  var NotAnimatedContextMenu = function (_React$Component) {\n    _inherits(NotAnimatedContextMenu, _React$Component);\n\n    function NotAnimatedContextMenu() {\n      _classCallCheck(this, NotAnimatedContextMenu);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(NotAnimatedContextMenu).apply(this, arguments));\n    }\n\n    _createClass(NotAnimatedContextMenu, [{\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            style = _this$props.style,\n            children = _this$props.children,\n            layouts = _this$props.layouts,\n            other = _objectWithoutProperties(_this$props, [\"style\", \"children\", \"layouts\"]);\n\n        var position = computePosition$1(layouts, reactNative.I18nManager.isRTL);\n        return React__default.createElement(reactNative.View, _extends({}, other, {\n          style: [styles$4.options, style, position]\n        }), children);\n      }\n    }]);\n\n    return NotAnimatedContextMenu;\n  }(React__default.Component);\n\n  var computePosition$2 = function computePosition(layouts) {\n    var windowLayout = layouts.windowLayout,\n        optionsLayout = layouts.optionsLayout;\n    var wHeight = windowLayout.height;\n    var oHeight = optionsLayout.height;\n    var top = wHeight - oHeight;\n    var left = 0,\n        right = 0;\n    var position = {\n      top: top,\n      left: left,\n      right: right\n    };\n    return position;\n  };\n\n  var SlideInMenu = function (_React$Component) {\n    _inherits(SlideInMenu, _React$Component);\n\n    function SlideInMenu(props) {\n      var _this;\n\n      _classCallCheck(this, SlideInMenu);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(SlideInMenu).call(this, props));\n      _this.state = {\n        slide: new reactNative.Animated.Value(0)\n      };\n      return _this;\n    }\n\n    _createClass(SlideInMenu, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        reactNative.Animated.timing(this.state.slide, {\n          duration: OPEN_ANIM_DURATION,\n          toValue: 1,\n          easing: reactNative.Easing.out(reactNative.Easing.cubic),\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this2 = this;\n\n        return new Promise(function (resolve) {\n          reactNative.Animated.timing(_this2.state.slide, {\n            duration: CLOSE_ANIM_DURATION,\n            toValue: 0,\n            easing: reactNative.Easing.in(reactNative.Easing.cubic),\n            useNativeDriver: USE_NATIVE_DRIVER\n          }).start(resolve);\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            style = _this$props.style,\n            children = _this$props.children,\n            layouts = _this$props.layouts,\n            other = _objectWithoutProperties(_this$props, [\"style\", \"children\", \"layouts\"]);\n\n        var oHeight = layouts.optionsLayout.height;\n        var animation = {\n          transform: [{\n            translateY: this.state.slide.interpolate({\n              inputRange: [0, 1],\n              outputRange: [oHeight, 0]\n            })\n          }]\n        };\n        var position = computePosition$2(layouts);\n        return React__default.createElement(reactNative.Animated.View, _extends({\n          style: [styles$5.options, style, animation, position]\n        }, other), children);\n      }\n    }]);\n\n    return SlideInMenu;\n  }(React__default.Component);\n\n  var styles$5 = reactNative.StyleSheet.create({\n    options: {\n      position: 'absolute',\n      backgroundColor: 'white',\n      shadowColor: 'black',\n      shadowOpacity: 0.3,\n      shadowOffset: {\n        width: 3,\n        height: 3\n      },\n      shadowRadius: 4,\n      elevation: 5\n    }\n  });\n  var popoverPadding = 7;\n  var anchorSize = 15;\n  var anchorHyp = Math.sqrt(anchorSize * anchorSize + anchorSize * anchorSize);\n  var anchorOffset = (anchorHyp + anchorSize) / 2 - popoverPadding;\n\n  function axisNegativeSideProperties(_ref) {\n    var oDim = _ref.oDim,\n        tPos = _ref.tPos;\n    return {\n      position: tPos - oDim\n    };\n  }\n\n  function axisPositiveSideProperties(_ref2) {\n    var tPos = _ref2.tPos,\n        tDim = _ref2.tDim;\n    return {\n      position: tPos + tDim - anchorSize\n    };\n  }\n\n  function centeringProperties(_ref3) {\n    var oDim = _ref3.oDim,\n        wDim = _ref3.wDim,\n        tPos = _ref3.tPos,\n        tDim = _ref3.tDim;\n    var center = Math.round(tPos + tDim / 2);\n    var leftOffset = oDim / 2 - center;\n    var rightOffset = center + oDim / 2 - wDim;\n    return {\n      center: center,\n      leftOffset: leftOffset,\n      rightOffset: rightOffset\n    };\n  }\n\n  function axisCenteredPositionProperties(options) {\n    var oDim = options.oDim,\n        wDim = options.wDim;\n\n    var _centeringProperties = centeringProperties(options),\n        center = _centeringProperties.center,\n        leftOffset = _centeringProperties.leftOffset,\n        rightOffset = _centeringProperties.rightOffset;\n\n    if (leftOffset > 0 || rightOffset > 0) {\n      if (leftOffset < rightOffset) {\n        return {\n          offset: rightOffset,\n          position: wDim - oDim\n        };\n      }\n\n      if (rightOffset < leftOffset) {\n        return {\n          offset: -leftOffset,\n          position: 0\n        };\n      }\n    }\n\n    return {\n      offset: 0,\n      position: center - oDim / 2\n    };\n  }\n\n  function getCenteringPrice(options) {\n    var _centeringProperties2 = centeringProperties(options),\n        leftOffset = _centeringProperties2.leftOffset,\n        rightOffset = _centeringProperties2.rightOffset;\n\n    return Math.max(0, leftOffset) + Math.max(0, rightOffset);\n  }\n\n  function getTopPrice(hOptions, vOptions) {\n    var centerOffset = getCenteringPrice(vOptions);\n    var sideOffset = Math.max(0, hOptions.oDim - hOptions.tPos);\n    return centerOffset + sideOffset;\n  }\n\n  function getBottomPrice(hOptions, vOptions) {\n    var centerOffset = getCenteringPrice(vOptions);\n    var sideOffset = Math.max(0, hOptions.tPos + hOptions.tDim + hOptions.oDim - hOptions.wDim);\n    return centerOffset + sideOffset;\n  }\n\n  function getLeftPrice(hOptions, vOptions) {\n    var centerOffset = getCenteringPrice(hOptions);\n    var sideOffset = Math.max(0, vOptions.oDim - vOptions.tPos);\n    return centerOffset + sideOffset;\n  }\n\n  function getRightPrice(hOptions, vOptions) {\n    var centerOffset = getCenteringPrice(hOptions);\n    var sideOffset = Math.max(0, vOptions.tPos + vOptions.tDim + vOptions.oDim - vOptions.wDim);\n    return centerOffset + sideOffset;\n  }\n\n  function getStartPosKey(isRTL) {\n    return isRTL ? 'right' : 'left';\n  }\n\n  function topProperties(hOptions, vOptions, isRTL) {\n    var centered = axisCenteredPositionProperties(vOptions);\n    var side = axisNegativeSideProperties(hOptions);\n    return {\n      position: _defineProperty({\n        top: side.position\n      }, getStartPosKey(isRTL), centered.position),\n      offset: centered.offset,\n      placement: 'top'\n    };\n  }\n\n  function bottomProperties(hOptions, vOptions, isRTL) {\n    var centered = axisCenteredPositionProperties(vOptions);\n    var side = axisPositiveSideProperties(hOptions);\n    return {\n      position: _defineProperty({\n        top: side.position\n      }, getStartPosKey(isRTL), centered.position),\n      offset: centered.offset,\n      placement: 'bottom'\n    };\n  }\n\n  function rightProperties(hOptions, vOptions, isRTL) {\n    var centered = axisCenteredPositionProperties(hOptions);\n    var side = axisPositiveSideProperties(vOptions);\n    return {\n      position: _defineProperty({\n        top: centered.position\n      }, getStartPosKey(isRTL), side.position),\n      offset: centered.offset,\n      placement: 'right'\n    };\n  }\n\n  function leftProperties(hOptions, vOptions, isRTL) {\n    var centered = axisCenteredPositionProperties(hOptions);\n    var side = axisNegativeSideProperties(vOptions);\n    return {\n      position: _defineProperty({\n        top: centered.position\n      }, getStartPosKey(isRTL), side.position),\n      offset: centered.offset,\n      placement: 'left'\n    };\n  }\n\n  var propertiesByPlacement = {\n    top: topProperties,\n    bottom: bottomProperties,\n    left: leftProperties,\n    right: rightProperties\n  };\n\n  function computeProperties(_ref4, placement, preferredPlacement, isRTL) {\n    var windowLayout = _ref4.windowLayout,\n        triggerLayout = _ref4.triggerLayout,\n        optionsLayout = _ref4.optionsLayout;\n    var wX = windowLayout.x,\n        wY = windowLayout.y,\n        wWidth = windowLayout.width,\n        wHeight = windowLayout.height;\n    var tX = triggerLayout.x,\n        tY = triggerLayout.y,\n        tHeight = triggerLayout.height,\n        tWidth = triggerLayout.width;\n    var oHeight = optionsLayout.height,\n        oWidth = optionsLayout.width;\n    var hOptions = {\n      oDim: oHeight + popoverPadding * 2,\n      wDim: wHeight,\n      tPos: tY - wY,\n      tDim: tHeight\n    };\n    var vOptions = {\n      oDim: oWidth + popoverPadding * 2,\n      wDim: wWidth,\n      tPos: tX - wX,\n      tDim: tWidth\n    };\n\n    if (placement !== 'auto' && propertiesByPlacement[placement]) {\n      return propertiesByPlacement[placement](hOptions, vOptions, isRTL);\n    }\n\n    var prices = {\n      top: getTopPrice(hOptions, vOptions),\n      bottom: getBottomPrice(hOptions, vOptions),\n      right: getRightPrice(hOptions, vOptions),\n      left: getLeftPrice(hOptions, vOptions)\n    };\n    var bestPrice = Object.values(prices).sort(function (a, b) {\n      return a - b;\n    })[0];\n    var bestPlacement = prices[preferredPlacement] === bestPrice ? preferredPlacement : Object.keys(prices).find(function (pl) {\n      return prices[pl] === bestPrice;\n    });\n    return propertiesByPlacement[bestPlacement](hOptions, vOptions, isRTL);\n  }\n\n  var Popover = function (_React$Component) {\n    _inherits(Popover, _React$Component);\n\n    function Popover(props) {\n      var _this;\n\n      _classCallCheck(this, Popover);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Popover).call(this, props));\n      _this.state = {\n        scaleAnim: new reactNative.Animated.Value(0.1)\n      };\n      return _this;\n    }\n\n    _createClass(Popover, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        reactNative.Animated.timing(this.state.scaleAnim, {\n          duration: OPEN_ANIM_DURATION,\n          toValue: 1,\n          easing: reactNative.Easing.out(reactNative.Easing.cubic),\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this2 = this;\n\n        return new Promise(function (resolve) {\n          reactNative.Animated.timing(_this2.state.scaleAnim, {\n            duration: CLOSE_ANIM_DURATION,\n            toValue: 0,\n            easing: reactNative.Easing.in(reactNative.Easing.cubic),\n            useNativeDriver: USE_NATIVE_DRIVER\n          }).start(resolve);\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            style = _this$props.style,\n            children = _this$props.children,\n            layouts = _this$props.layouts,\n            anchorStyle = _this$props.anchorStyle,\n            preferredPlacement = _this$props.preferredPlacement,\n            userPlacement = _this$props.placement,\n            other = _objectWithoutProperties(_this$props, [\"style\", \"children\", \"layouts\", \"anchorStyle\", \"preferredPlacement\", \"placement\"]);\n\n        var isRTL = reactNative.I18nManager.isRTL;\n        var animation = {\n          transform: [{\n            scale: this.state.scaleAnim\n          }],\n          opacity: this.state.scaleAnim\n        };\n\n        var _computeProperties = computeProperties(layouts, userPlacement, preferredPlacement, isRTL),\n            position = _computeProperties.position,\n            placement = _computeProperties.placement,\n            offset = _computeProperties.offset;\n\n        return React__default.createElement(reactNative.Animated.View, {\n          style: [styles$6.animated, animation, position, getContainerStyle({\n            placement: placement,\n            isRTL: isRTL\n          })],\n          pointerEvents: \"box-none\"\n        }, React__default.createElement(reactNative.View, {\n          style: [styles$6.anchor, dynamicAnchorStyle({\n            placement: placement,\n            offset: offset,\n            isRTL: isRTL\n          }), anchorStyle]\n        }), React__default.createElement(reactNative.View, _extends({}, other, {\n          style: [styles$6.options, style]\n        }), children));\n      }\n    }]);\n\n    return Popover;\n  }(React__default.Component);\n\n  Popover.propTypes = {\n    anchorStyle: propTypes.oneOfType([propTypes.object, propTypes.number, propTypes.array]),\n    placement: propTypes.oneOf(['auto', 'top', 'right', 'bottom', 'left']),\n    preferredPlacement: propTypes.oneOf(['top', 'right', 'bottom', 'left'])\n  };\n  Popover.defaultProps = {\n    preferredPlacement: 'top',\n    placement: 'auto'\n  };\n\n  var getContainerStyle = function getContainerStyle(_ref5) {\n    var placement = _ref5.placement,\n        isRTL = _ref5.isRTL;\n    return {\n      left: {\n        flexDirection: isRTL ? 'row' : 'row-reverse'\n      },\n      right: {\n        flexDirection: isRTL ? 'row-reverse' : 'row'\n      },\n      top: {\n        flexDirection: 'column-reverse'\n      },\n      bottom: {\n        flexDirection: 'column'\n      }\n    }[placement];\n  };\n\n  var dynamicAnchorStyle = function dynamicAnchorStyle(_ref6) {\n    var _ref7, _ref8;\n\n    var offset = _ref6.offset,\n        placement = _ref6.placement,\n        isRTL = _ref6.isRTL;\n    var start = getStartPosKey(isRTL);\n\n    switch (placement) {\n      case 'right':\n        return {\n          top: offset,\n          transform: [{\n            translateX: anchorOffset\n          }, {\n            rotate: '45deg'\n          }]\n        };\n\n      case 'left':\n        return {\n          top: offset,\n          transform: [{\n            translateX: -anchorOffset\n          }, {\n            rotate: '45deg'\n          }]\n        };\n\n      case 'top':\n        return _ref7 = {}, _defineProperty(_ref7, start, offset), _defineProperty(_ref7, \"transform\", [{\n          translateY: -anchorOffset\n        }, {\n          rotate: '45deg'\n        }]), _ref7;\n\n      case 'bottom':\n        return _ref8 = {}, _defineProperty(_ref8, start, offset), _defineProperty(_ref8, \"transform\", [{\n          translateY: anchorOffset\n        }, {\n          rotate: '45deg'\n        }]), _ref8;\n    }\n  };\n\n  var styles$6 = reactNative.StyleSheet.create({\n    animated: {\n      padding: popoverPadding,\n      backgroundColor: 'transparent',\n      position: 'absolute',\n      alignItems: 'center'\n    },\n    options: {\n      borderRadius: 2,\n      minWidth: anchorHyp,\n      minHeight: anchorHyp,\n      backgroundColor: 'white',\n      shadowColor: 'black',\n      shadowOpacity: 0.3,\n      shadowOffset: {\n        width: 3,\n        height: 3\n      },\n      shadowRadius: 4,\n      elevation: 5\n    },\n    anchor: {\n      width: anchorSize,\n      height: anchorSize,\n      backgroundColor: 'white',\n      elevation: 5\n    }\n  });\n  var renderers = {\n    ContextMenu: ContextMenu,\n    SlideInMenu: SlideInMenu,\n    NotAnimatedContextMenu: NotAnimatedContextMenu,\n    Popover: Popover\n  };\n  var MenuContext = deprecatedComponent('MenuContext is deprecated and it might be removed in future releases, use MenuProvider instead.', ['openMenu', 'toggleMenu', 'closeMenu', 'isMenuOpen'])(MenuProvider);\n  exports.default = MenuExternal;\n  exports.Menu = MenuExternal;\n  exports.MenuProvider = MenuProvider;\n  exports.MenuContext = MenuContext;\n  exports.MenuOption = MenuOption$1;\n  exports.MenuOptions = MenuOptions$1;\n  exports.MenuTrigger = MenuTrigger$1;\n  exports.renderers = renderers;\n  exports.withMenuContext = withCtx;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["../src/polyfills.js","../src/helpers.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/index.js","../src/with-context.js","../src/menuRegistry.js","../src/constants.js","../src/Backdrop.js","../src/logger.js","../src/MenuPlaceholder.js","../src/renderers/MenuOutside.js","../src/MenuProvider.js","../src/MenuOptions.js","../src/MenuTrigger.js","../src/renderers/ContextMenu.js","../src/Menu.js","../src/MenuOption.js","../src/renderers/NotAnimatedContextMenu.js","../src/renderers/SlideInMenu.js","../src/renderers/Popover.js","../src/index.js"],"names":["Platform","obj","measure","ref","resolve","x","y","width","height","makeName","nextID","Touchable","TouchableComponent","android","TouchableNativeFeedback","ios","TouchableHighlight","default","defaultTouchableProps","underlayColor","arr","next","it","component","methods","React","args","onRef","console","ReactPropTypesSecret","require$$0","printWarning","assign","checkPropTypes","propName","EnhanceContext","forwardedRef","rest","custom","name","Component","consumerName","Context","enhanceForwardRef","FC","menus","instance","layouts","menu","Object","optionsCustomStyles","iterator2array","subscribe","unsubscribe","updateLayoutInfo","getMenu","getAll","setOptionsCustomStyles","OPEN_ANIM_DURATION","CLOSE_ANIM_DURATION","USE_NATIVE_DRIVER","Backdrop","Animated","duration","toValue","useNativeDriver","onPress","style","TouchableWithoutFeedback","styles","opacity","fadeAnim","View","PropTypes","isRequired","fullscreen","position","top","left","bottom","right","CFG","debug","MenuPlaceholder","ctx","backdropStyles","shouldRenderMenu","placeholder","onBackdropRef","overflow","computePosition","windowLayout","MenuOutside","children","other","props","options","defaultOptionsContainerRenderer","layoutsEqual","a","b","PopupMenuContext","createContext","withCtx","withContext","instanceCount","MenuProvider","makeMenuRegistry","menuActions","openMenu","closeMenu","toggleMenu","isMenuOpen","_getOpenedMenu","_notify","menuRegistry","backHandler","BackHandler","customStyles","skipInstanceCheck","Promise","triggerLayout","undefined","hideMenu","hideBackdrop","forceUpdate","NULL","prev","afterSetState","beforeSetState","openedMenuName","optionsLayout","menuCtx","_onLayout","SafeAreaView","_onSafeAreaLayout","_onPlaceholderRef","trigger","e","isOutside","renderer","rendererProps","safeAreaLayout","optionsContainerStyle","renderOptionsContainer","optionsRenderer","onLayout","optionsType","isClassComponent","nativeEvent","layout","bool","flex1","flex","safeArea","MenuOptions","_props","menuName","MenuTrigger","disabled","text","triggerOnLongPress","onAlternativeAction","testID","makeTouchable","triggerOuterWrapper","Text","triggerText","string","axisPosition","oDim","tPos","pos","Math","tDim","wDim","maxPos","fitPositionIntoSafeArea","saX","saY","saHeight","saWidth","oHeight","oWidth","wWidth","fit","wX","wY","wHeight","tX","tY","tHeight","tWidth","start","isRTL","ContextMenu","scaleAnim","easing","Easing","animation","transform","scale","I18nManager","borderRadius","backgroundColor","PixelRatio","shadowColor","shadowOpacity","shadowOffset","shadowRadius","elevation","isRegularComponent","c","isTrigger","isMenuOptions","Menu","prevProps","force","r","key","onSelect","onOpen","onClose","opened","onBackdropPress","func","MenuExternal","get","set","MenuOption","value","shouldClose","disableTouchable","disabledStyles","defaultStyles","rendered","optionText","option","padding","optionTextDisabled","color","NotAnimatedContextMenu","SlideInMenu","slide","translateY","inputRange","outputRange","popoverPadding","anchorSize","anchorHyp","anchorOffset","center","leftOffset","rightOffset","centeringProperties","offset","centerOffset","getCenteringPrice","sideOffset","hOptions","vOptions","centered","axisCenteredPositionProperties","side","axisNegativeSideProperties","getStartPosKey","placement","axisPositiveSideProperties","propertiesByPlacement","rightProperties","prices","getTopPrice","getBottomPrice","getRightPrice","getLeftPrice","bestPrice","bestPlacement","Popover","anchorStyle","preferredPlacement","userPlacement","computeProperties","getContainerStyle","dynamicAnchorStyle","flexDirection","translateX","rotate","animated","alignItems","minWidth","minHeight","anchor","renderers","MenuContext","deprecatedComponent"],"mappings":"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","sourcesContent":["// platform select polyfil for older RN versions\nimport { Platform } from 'react-native';\n\nif (!Platform.select) {\n  Platform.select = (obj) => obj[Platform.OS];\n}\n","import React from 'react';\nimport { Platform, TouchableHighlight, TouchableNativeFeedback } from 'react-native';\n\n/**\n * Promisifies measure's callback function and returns layout object.\n */\nexport const measure = ref => new Promise((resolve) => {\n  ref.measure((x, y, width, height, pageX, pageY) => {\n    resolve({\n      x: pageX, y: pageY,\n      width, height,\n    })\n  });\n});\n\n/**\n * Create unique menu name across all menu instances.\n */\nexport const makeName = (function() {\n  let nextID = 1;\n  return () => `menu-${nextID++}`;\n})();\n\n/**\n * Create touchable component based on passed parameter and platform.\n * It also returns default props for specific touchable types.\n */\nexport function makeTouchable(TouchableComponent) {\n  const Touchable = TouchableComponent || Platform.select({\n    android: TouchableNativeFeedback,\n    ios: TouchableHighlight,\n    default: TouchableHighlight,\n  });\n  let defaultTouchableProps = {};\n  if (Touchable === TouchableHighlight) {\n    defaultTouchableProps = { underlayColor: 'rgba(0, 0, 0, 0.1)' };\n  }\n  return { Touchable, defaultTouchableProps };\n}\n\nfunction includes(arr, value) {\n  return arr.indexOf(value) > -1;\n}\n\n/**\nLog object - prepares object for logging by stripping all \"private\" or excluding fields\n*/\nexport function lo(object, ...excluding) {\n  const exc = Array.from(excluding);\n  function isObject(obj) {\n    return obj === Object(obj);\n  }\n  function withoutPrivate(obj) {\n    if (!isObject(obj)) return obj;\n    const res = {};\n    for (var property in obj) {\n      if (obj.hasOwnProperty(property)) {\n        if (!property.startsWith('_') && !includes(exc, property)) {\n          res[property] = withoutPrivate(obj[property]);\n        }\n      }\n    }\n    return res;\n  }\n  return withoutPrivate(object);\n}\n\n/**\nConverts iterator to array\n*/\nexport function iterator2array(it) {\n  // workaround around https://github.com/instea/react-native-popup-menu/issues/41#issuecomment-340290127\n  const arr = [];\n  for (let next = it.next(); !next.done; next = it.next()) {\n    arr.push(next.value);\n  }\n  return arr;\n}\n\n/** checks if component is class component */\nexport function isClassComponent(component) {\n  return component.prototype && !!component.prototype.render;\n}\n\n/**\n * Higher order component to deprecate usage of component.\n * message - deprecate warning message\n * methods - array of method names to be delegated to deprecated component\n */\nexport function deprecatedComponent(message, methods = []) {\n  return function deprecatedComponentHOC(Component) {\n    return class DeprecatedComponent extends React.Component {\n      constructor(...args) {\n        super(...args);\n        methods.forEach(name => {\n          // delegate methods to the component\n          this[name] = (...args) => this.ref && this.ref[name](...args)\n        });\n      }\n\n      render() {\n        return <Component {...this.props} ref={this.onRef} />\n      }\n\n      onRef = ref => this.ref = ref;\n\n      componentDidMount() {\n        console.warn(message);\n      }\n    }\n  }\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          )\n\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOf, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues);\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (propValue.hasOwnProperty(key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React from \"react\";\n\nexport function withContext(Context, propName = \"context\") {\n  return function wrap(Component) {\n    class EnhanceContext extends React.Component {\n      render() {\n        const { forwardedRef, ...rest } = this.props;\n\n        return (\n          <Context.Consumer>\n            {value => {\n              const custom = {\n                [propName]: value,\n                ref: forwardedRef,\n              };\n              return <Component {...custom} {...rest} />;\n            }}\n          </Context.Consumer>\n        );\n      }\n    }\n\n    const name = Component.displayName || Component.name || \"Component\";\n    const consumerName =\n      Context.Consumer.displayName ||\n      Context.Consumer.name ||\n      \"Context.Consumer\";\n\n    function enhanceForwardRef(props, ref) {\n      return <EnhanceContext {...props} forwardedRef={ref} />;\n    }\n\n    enhanceForwardRef.displayName = `enhanceContext-${consumerName}(${name})`;\n\n    const FC = React.forwardRef(enhanceForwardRef);\n    FC.defaultProps = Component.defaultProps;\n    FC.propTypes = Component.propTypes;\n    return FC\n  };\n}\n","import { iterator2array } from './helpers';\n\n/**\n * Registry to subscribe, unsubscribe and update data of menus.\n *\n * menu data: {\n *   instance: react instance\n *   triggerLayout: Object - layout of menu trigger if known\n *   optionsLayout: Object - layout of menu options if known\n *   optionsCustomStyles: Object - custom styles of options\n * }\n*/\nexport default function makeMenuRegistry(menus = new Map()) {\n\n  /**\n   * Subscribes menu instance.\n   */\n  function subscribe(instance) {\n    const name = instance.getName()\n    if (menus.get(name)) {\n      console.warn(`incorrect usage of popup menu - menu with name ${name} already exists`);\n    }\n    menus.set(name, { name, instance });\n  }\n\n  /**\n   * Unsubscribes menu instance.\n   */\n  function unsubscribe(instance) {\n    menus.delete(instance.getName());\n  }\n\n  /**\n   * Updates layout infomration.\n   */\n  function updateLayoutInfo(name, layouts = {}) {\n    if (!menus.has(name)) {\n      return;\n    }\n    const menu = Object.assign({}, menus.get(name));\n    if (layouts.hasOwnProperty('triggerLayout')) {\n      menu.triggerLayout = layouts.triggerLayout;\n    }\n    if (layouts.hasOwnProperty('optionsLayout')) {\n      menu.optionsLayout = layouts.optionsLayout;\n    }\n    menus.set(name, menu);\n  }\n\n  function setOptionsCustomStyles(name, optionsCustomStyles) {\n    if (!menus.has(name)) {\n      return;\n    }\n    const menu = { ...menus.get(name), optionsCustomStyles };\n    menus.set(name, menu);\n  }\n\n  /**\n   * Get `menu data` by name.\n   */\n  function getMenu(name) {\n    return menus.get(name);\n  }\n\n  /**\n   * Returns all subscribed menus as array of `menu data`\n   */\n  function getAll() {\n    return iterator2array(menus.values());\n  }\n\n  return { subscribe, unsubscribe, updateLayoutInfo, getMenu, getAll, setOptionsCustomStyles };\n}\n","import { Platform } from 'react-native';\n\n// common durations of animation\nexport const OPEN_ANIM_DURATION = 225;\nexport const CLOSE_ANIM_DURATION = 195;\n\nexport const USE_NATIVE_DRIVER = (Platform.OS !== \"web\");\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, StyleSheet, TouchableWithoutFeedback, Animated } from 'react-native';\nimport { OPEN_ANIM_DURATION, CLOSE_ANIM_DURATION, USE_NATIVE_DRIVER } from './constants';\n\nclass Backdrop extends Component {\n\n  constructor(...args) {\n    super(...args);\n    this.fadeAnim = new Animated.Value(0.001);\n  }\n\n  open() {\n    return new Promise(resolve => {\n      Animated.timing(this.fadeAnim, {\n        duration: OPEN_ANIM_DURATION,\n        toValue: 1,\n        useNativeDriver: USE_NATIVE_DRIVER,\n      }).start(resolve);\n    });\n  }\n\n  close() {\n    return new Promise(resolve => {\n      Animated.timing(this.fadeAnim, {\n        duration: CLOSE_ANIM_DURATION,\n        toValue: 0,\n        useNativeDriver: USE_NATIVE_DRIVER,\n      }).start(resolve);\n    });\n  }\n\n  render() {\n    const { onPress, style } = this.props;\n    return (\n      <TouchableWithoutFeedback onPress={onPress}>\n        <Animated.View style={[styles.fullscreen, { opacity: this.fadeAnim }]}>\n          <View style={[styles.fullscreen, style]} />\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n}\n\nBackdrop.propTypes = {\n  onPress: PropTypes.func.isRequired,\n};\n\nconst styles = StyleSheet.create({\n  fullscreen: {\n    opacity: 0,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n  },\n});\n\nexport default Backdrop;\n","\nexport const CFG = {\n  debug: false,\n}\n/**\n * Debug logger depending on `Menu.debug` static porperty.\n */\nexport const debug = (...args) => {\n  CFG.debug && console.log('react-native-popup-menu', ...args);\n};\n","import React, { Component } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Backdrop from './Backdrop';\nimport { debug } from './logger.js';\n\nexport default class MenuPlaceholder extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {};\n  }\n\n  shouldComponentUpdate() {\n    // don't terminate closing animation\n    return !this.props.ctx._isMenuClosing;\n  }\n\n  render() {\n    const { ctx, backdropStyles } = this.props;\n    const shouldRenderMenu = ctx.isMenuOpen() && ctx._isInitialized();\n    debug('MenuPlaceholder should render', shouldRenderMenu);\n    if (!shouldRenderMenu) {\n      return null;\n    }\n    return (\n      <View style={styles.placeholder}>\n        <Backdrop\n          onPress={ctx._onBackdropPress}\n          style={backdropStyles}\n          ref={ctx.onBackdropRef}\n        />\n        {\n          ctx._makeOptions()\n        }\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  placeholder: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n  },\n});\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native';\n\nexport const computePosition = ({ windowLayout }) => ({\n  top: windowLayout.height,\n  left: windowLayout.width,\n});\n\n\nconst MenuOutside = props => {\n  const { style, children, layouts, ...other } = props;\n  const position = computePosition(layouts);\n  return (\n    <View {...other} style={[styles.options, style, position]} collapsable={false}>\n      {children}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  options: {\n    position: 'absolute',\n  },\n});\n\nexport default MenuOutside;\n","import React, { Component, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, BackHandler, SafeAreaView, StyleSheet } from 'react-native';\n\nimport { withContext } from './with-context';\nimport makeMenuRegistry from './menuRegistry';\nimport MenuPlaceholder from './MenuPlaceholder';\nimport { measure, isClassComponent } from './helpers';\nimport { debug } from './logger.js';\nimport MenuOutside from './renderers/MenuOutside';\n\nconst defaultOptionsContainerRenderer = options => options;\nconst layoutsEqual = (a, b) => (\n  a === b || (a && b && a.width === b.width && a.height === b.height)\n);\n\nif (!React.forwardRef) {\n  throw new Error('This version of popup-menu requires RN 0.55+. Check our compatibility table.')\n}\nexport const PopupMenuContext = createContext({})\nexport const withCtx = withContext(PopupMenuContext, \"ctx\");\n\n// count of MenuProvider instances\nlet instanceCount = 0;\n\nexport default class MenuProvider extends Component {\n\n  constructor(props) {\n    super(props);\n    this._menuRegistry = makeMenuRegistry();\n    this._isMenuClosing = false;\n    const menuActions = {\n      openMenu: name => this.openMenu(name),\n      closeMenu: () => this.closeMenu(),\n      toggleMenu: name => this.toggleMenu(name),\n      isMenuOpen: () => this.isMenuOpen(),\n      _getOpenedMenu: () => this._getOpenedMenu(),\n      _notify: force => this._notify(force),\n    };\n    this.menuCtx = { menuRegistry: this._menuRegistry, menuActions }\n  }\n\n  _handleBackButton = () => {\n    const { backHandler } = this.props;\n    debug('_handleBackButton called', backHandler);\n\n    // Default handler if true is passed\n    if (backHandler === true) {\n      if (this.isMenuOpen()) {\n        this.closeMenu();\n        return true;\n      }\n    }\n\n    // Custom handler called with MenuProvider instance id function is passed\n    if (typeof backHandler === 'function') {\n      return backHandler(this);\n    }\n\n    return false;\n  }\n\n  componentDidMount() {\n    if (BackHandler) {\n      BackHandler.addEventListener('hardwareBackPress', this._handleBackButton);\n    } else {\n      const { backHandler } = this.props;\n      if (backHandler === true || typeof backHandler === 'function') {\n        console.warn('backHandler prop cannot be used if BackHandler is not present (RN >= 0.44 required)');\n      }\n    }\n    const { customStyles, skipInstanceCheck } = this.props;\n    if (customStyles.menuContextWrapper) {\n      console.warn('menuContextWrapper custom style is deprecated and it might be removed in future releases, use menuProviderWrapper instead.');\n    }\n    if (!skipInstanceCheck) {\n      instanceCount++;\n    }\n    if (instanceCount > 1) {\n      console.warn('In most cases you should not have more MenuProviders in your app (see API documentation). In other cases use skipInstanceCheck prop.');\n    }\n  }\n\n  componentWillUnmount() {\n    debug('unmounting menu provider')\n    if (BackHandler) {\n      BackHandler.removeEventListener('hardwareBackPress', this._handleBackButton);\n    }\n    const { skipInstanceCheck } = this.props;\n    if (!skipInstanceCheck) {\n      instanceCount--;\n    }\n  }\n\n  isMenuOpen() {\n    return !!this._getOpenedMenu();\n  }\n\n  openMenu(name) {\n    const menu = this._menuRegistry.getMenu(name);\n    if (!menu) {\n      console.warn(`menu with name ${name} does not exist`);\n      return Promise.resolve();\n    }\n    debug('open menu', name);\n    menu.instance._setOpened(true);\n    return this._notify();\n  }\n\n  closeMenu() { // has no effect on controlled menus\n    debug('close menu');\n    this._menuRegistry.getAll()\n      .filter(menu => menu.instance._getOpened())\n      .forEach(menu => menu.instance._setOpened(false));\n    return this._notify();\n  }\n\n  _invalidateTriggerLayouts() {\n    // invalidate layouts for closed menus,\n    // both controlled and uncontrolled menus\n    this._menuRegistry.getAll()\n      .filter(menu => !menu.instance.isOpen())\n      .forEach(menu => {\n        this._menuRegistry.updateLayoutInfo(menu.name, { triggerLayout: undefined });\n      });\n  }\n\n  _beforeClose(menu) {\n    debug('before close', menu.name);\n    const hideMenu = (this.optionsRef\n      && this.optionsRef.close\n      && this.optionsRef.close()) || Promise.resolve();\n    const hideBackdrop = this.backdropRef && this.backdropRef.close();\n    this._invalidateTriggerLayouts();\n    this._isMenuClosing = true;\n    return Promise.all([hideMenu, hideBackdrop])\n      .then(() => {\n        this._isMenuClosing = false;\n      })\n      .catch(err => {\n        this._isMenuClosing = false;\n        throw err;\n      })\n  }\n\n  toggleMenu(name) {\n    const menu = this._menuRegistry.getMenu(name);\n    if (!menu) {\n      console.warn(`menu with name ${name} does not exist`);\n      return Promise.resolve();\n    }\n    debug('toggle menu', name);\n    if (menu.instance._getOpened()) {\n      return this.closeMenu();\n    } else {\n      return this.openMenu(name);\n    }\n  }\n\n  _notify(forceUpdate) {\n    const NULL = {};\n    const prev = this.openedMenu || NULL;\n    const next = this._menuRegistry.getAll().find(menu => menu.instance.isOpen()) || NULL;\n    // set newly opened menu before any callbacks are called\n    this.openedMenu = next === NULL ? undefined : next;\n    if (!forceUpdate && !this._isRenderNeeded(prev, next)) {\n      return Promise.resolve();\n    }\n    debug('notify: next menu:', next.name, ' prev menu:', prev.name);\n    let afterSetState = undefined;\n    let beforeSetState = () => Promise.resolve();\n    if (prev.name !== next.name) {\n      if (prev !== NULL && !prev.instance.isOpen()) {\n        beforeSetState = () => this._beforeClose(prev)\n          .then(() => prev.instance.props.onClose());\n      }\n      if (next !== NULL) {\n        next.instance.props.onOpen();\n        afterSetState = () => this._initOpen(next);\n      }\n    }\n    return beforeSetState().then(() => {\n      if (!this._placeholderRef) {\n        debug('setState ignored - maybe the context was unmounted')\n        return\n      }\n      this._placeholderRef.setState({ openedMenuName: this.openedMenu && this.openedMenu.name }, afterSetState);\n      debug('notify ended');\n    });\n  }\n\n  /**\n  Compares states of opened menu to determine if rerender is needed.\n  */\n  _isRenderNeeded(prev, next) {\n    if (prev === next) {\n      debug('_isRenderNeeded: skipping - no change');\n      return false;\n    }\n    if (prev.name !== next.name) {\n      return true;\n    }\n    const { triggerLayout, optionsLayout } = next;\n    if (!triggerLayout || !optionsLayout) {\n      debug('_isRenderNeeded: skipping - no trigger or options layout');\n      return false;\n    }\n    return true;\n  }\n\n  render() {\n    const { style, customStyles } = this.props;\n    debug('render menu', this.isMenuOpen(), this._ownLayout);\n    return (\n      <PopupMenuContext.Provider value={this.menuCtx}>\n        <View style={styles.flex1} onLayout={this._onLayout}>\n          <View style={[\n            styles.flex1,\n            customStyles.menuContextWrapper,\n            customStyles.menuProviderWrapper,\n            style,\n          ]}>\n            { this.props.children }\n          </View>\n          <SafeAreaView\n            style={styles.safeArea}\n            pointerEvents=\"box-none\"\n          >\n            <View\n              style={styles.flex1}\n              collapsable={false}\n              pointerEvents=\"box-none\"\n              onLayout={this._onSafeAreaLayout}/>\n            <MenuPlaceholder\n              ctx={this}\n              backdropStyles={customStyles.backdrop}\n              ref={this._onPlaceholderRef}\n              />\n          </SafeAreaView>\n        </View>\n      </PopupMenuContext.Provider>\n    );\n  }\n\n  onBackdropRef = r => {\n    this.backdropRef = r;\n  }\n\n  onOptionsRef = r => {\n    this.optionsRef = r;\n  }\n\n  _onPlaceholderRef = r => this._placeholderRef = r;\n\n  _getOpenedMenu() {\n    const name = this._placeholderRef && this._placeholderRef.state.openedMenuName;\n    const menu = name ? this._menuRegistry.getMenu(name) : undefined;\n    debug('_getOpenedMenu', name, !!menu)\n    return menu\n  }\n\n  _onBackdropPress = () => {\n    debug('on backdrop press');\n    const menu = this._getOpenedMenu();\n    if (menu) {\n      menu.instance.props.onBackdropPress();\n    }\n    this.closeMenu();\n  }\n\n  _isInitialized() {\n    return !!this._ownLayout;\n  }\n\n  _initOpen(menu) {\n    debug('opening', menu.name);\n    const trigger = menu.instance._getTrigger();\n    measure(trigger).then(triggerLayout => {\n      debug('got trigger measurements', triggerLayout);\n      this._menuRegistry.updateLayoutInfo(menu.name, { triggerLayout });\n      this.backdropRef && this.backdropRef.open()\n      this._notify();\n    });\n  }\n\n  _onOptionsLayout(e, name, isOutside) {\n    const optionsLayout = e.nativeEvent.layout;\n    optionsLayout.isOutside = isOutside;\n    debug('got options layout', optionsLayout);\n    this._menuRegistry.updateLayoutInfo(name, { optionsLayout });\n    this._notify();\n  }\n\n  _makeOptions() {\n    const { instance, triggerLayout, optionsLayout } = this._getOpenedMenu();\n    const options = instance._getOptions();\n    const { renderer, rendererProps } = instance.props;\n    const windowLayout = this._ownLayout;\n    const safeAreaLayout = this._safeAreaLayout;\n    const { optionsContainerStyle, renderOptionsContainer, customStyles } = options.props;\n    const optionsRenderer = renderOptionsContainer || defaultOptionsContainerRenderer;\n    const isOutside = !triggerLayout || !optionsLayout;\n    const onLayout = e => this._onOptionsLayout(e, instance.getName(), isOutside);\n    const style = [optionsContainerStyle, customStyles.optionsContainer];\n    const layouts = { windowLayout, triggerLayout, optionsLayout, safeAreaLayout };\n    const props = { ...rendererProps, style, onLayout, layouts };\n    const optionsType = isOutside ? MenuOutside : renderer;\n    if (isClassComponent(optionsType)) {\n      props.ref = this.onOptionsRef;\n    }\n    return React.createElement(optionsType, props, optionsRenderer(options));\n  }\n\n  _onLayout = ({ nativeEvent: { layout } }) => {\n    if (layoutsEqual(this._ownLayout, layout)) {\n      return;\n    }\n    this._ownLayout = layout;\n    debug('context layout has changed', this._ownLayout);\n    if (!this.isMenuOpen()) {\n      return;\n    }\n    const { instance } = this._getOpenedMenu();\n    const trigger = instance._getTrigger();\n    measure(trigger).then(triggerLayout => {\n      debug('got trigger measurements after context layout change', triggerLayout);\n      this._menuRegistry.updateLayoutInfo(instance.getName(), { triggerLayout });\n      // force update as own layout has changed\n      this._notify(true);\n    });\n  }\n\n  _onSafeAreaLayout = ({ nativeEvent: { layout } }) => {\n    if (layoutsEqual(this._safeAreaLayout, layout)) {\n      return;\n    }\n    this._safeAreaLayout = layout;\n    debug('safeArea layout has changed', this._safeAreaLayout);\n    if (!this.isMenuOpen()) {\n      return;\n    }\n    this._notify(true);\n  }\n\n}\n\nMenuProvider.propTypes = {\n  customStyles: PropTypes.object,\n  backHandler: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n  skipInstanceCheck: PropTypes.bool,\n}\n\nMenuProvider.defaultProps = {\n  customStyles: {},\n  backHandler: false,\n  skipInstanceCheck: false,\n};\n\nconst styles = StyleSheet.create({\n  flex1: {\n    flex: 1,\n  },\n  safeArea: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { View } from 'react-native';\nimport { withCtx } from './MenuProvider';\n\nexport class MenuOptions extends React.Component {\n\n  updateCustomStyles(_props) {\n    const { customStyles } = _props\n    const menu = this.props.ctx.menuActions._getOpenedMenu()\n    // FIXME react 16.3 workaround for ControlledExample!\n    if (!menu) return\n    const menuName = menu.instance.getName()\n    this.props.ctx.menuRegistry.setOptionsCustomStyles(menuName, customStyles)\n  }\n\n  componentDidMount() {\n    this.updateCustomStyles(this.props)\n  }\n\n  componentDidUpdate() {\n    this.updateCustomStyles(this.props)\n  }\n\n  render() {\n    const { customStyles, style, children } = this.props\n    return (\n      <View style={[customStyles.optionsWrapper, style]}>\n        {children}\n      </View>\n    )\n  }\n}\n\nMenuOptions.propTypes = {\n  customStyles: PropTypes.object,\n  renderOptionsContainer: PropTypes.func,\n  optionsContainerStyle: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array,\n  ]),\n};\n\nMenuOptions.defaultProps = {\n  customStyles: {},\n};\n\nexport default withCtx(MenuOptions);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, Text } from 'react-native';\nimport { debug } from './logger.js';\nimport { makeTouchable } from './helpers';\nimport { withCtx } from './MenuProvider';\n\nexport class MenuTrigger extends Component {\n\n  _onPress() {\n    debug('trigger onPress');\n    this.props.onPress && this.props.onPress();\n    this.props.ctx.menuActions.openMenu(this.props.menuName);\n  }\n\n  render() {\n    const { disabled, onRef, text, children, style, customStyles, menuName, \n      triggerOnLongPress, onAlternativeAction, testID, ...other } = this.props;\n    const onPress = () => !disabled && this._onPress();\n    const { Touchable, defaultTouchableProps } = makeTouchable(customStyles.TriggerTouchableComponent);\n    return (\n      <View ref={onRef} collapsable={false} style={customStyles.triggerOuterWrapper}>\n        <Touchable\n          testID={testID}\n          onPress={triggerOnLongPress ? onAlternativeAction : onPress}\n          onLongPress={triggerOnLongPress ? onPress : onAlternativeAction}\n          {...defaultTouchableProps}\n          {...customStyles.triggerTouchable}\n        >\n          <View {...other} style={[customStyles.triggerWrapper, style]}>\n            {text ? <Text style={customStyles.triggerText}>{text}</Text> : children}\n          </View>\n        </Touchable>\n      </View>\n    );\n  }\n\n}\n\nMenuTrigger.propTypes = {\n  disabled: PropTypes.bool,\n  text: PropTypes.string,\n  onPress: PropTypes.func,\n  onAlternativeAction: PropTypes.func,\n  customStyles: PropTypes.object,\n  triggerOnLongPress: PropTypes.bool,\n  testID: PropTypes.string,\n};\n\nMenuTrigger.defaultProps = {\n  disabled: false,\n  customStyles: {},\n  testID: undefined,\n};\n\nexport default withCtx(MenuTrigger)\n","import React from 'react';\nimport { I18nManager, Animated, Easing, StyleSheet, PixelRatio } from 'react-native';\nimport { OPEN_ANIM_DURATION, CLOSE_ANIM_DURATION, USE_NATIVE_DRIVER } from '../constants';\n\nconst axisPosition = (oDim, wDim, tPos, tDim) => {\n  // if options are bigger than window dimension, then render at 0\n  if (oDim > wDim) {\n    return 0;\n  }\n  // render at trigger position if possible\n  if (tPos + oDim <= wDim) {\n    return tPos;\n  }\n  // aligned to the trigger from the bottom (right)\n  if (tPos + tDim - oDim >= 0) {\n    return tPos + tDim - oDim;\n  }\n  // compute center position\n  let pos = Math.round(tPos + (tDim / 2) - (oDim / 2));\n  // check top boundary\n  if (pos < 0) {\n    return 0;\n  }\n  // check bottom boundary\n  if (pos + oDim > wDim) {\n    return wDim - oDim;\n  }\n  // if everything ok, render in center position\n  return pos;\n};\n\nfunction fit(pos, len, minPos, maxPos) {\n  if (pos === undefined) {\n    return undefined;\n  }\n  if (pos + len > maxPos) {\n    pos = maxPos - len;\n  }\n  if (pos < minPos) {\n    pos = minPos;\n  }\n  return pos;\n}\n// fits options (position) into safeArea\nexport const fitPositionIntoSafeArea = (position, layouts) => {\n  const { windowLayout, safeAreaLayout, optionsLayout } = layouts;\n  if (!safeAreaLayout) {\n    return position;\n  }\n  const { x: saX, y: saY, height: saHeight, width: saWidth } = safeAreaLayout;\n  const { height: oHeight, width: oWidth } = optionsLayout;\n  const { width: wWidth } = windowLayout;\n  let { top, left, right } = position;\n  top = fit(top, oHeight, saY, saY + saHeight);\n  left = fit(left, oWidth, saX, saX + saWidth)\n  right = fit(right, oWidth, wWidth - saX - saWidth, saX)\n  return { top, left, right };\n}\n\nexport const computePosition = (layouts, isRTL) => {\n  const { windowLayout, triggerLayout, optionsLayout } = layouts;\n  const { x: wX, y: wY, width: wWidth, height: wHeight } = windowLayout;\n  const { x: tX, y: tY, height: tHeight, width: tWidth } = triggerLayout;\n  const { height: oHeight, width: oWidth } = optionsLayout;\n  const top = axisPosition(oHeight, wHeight, tY - wY, tHeight);\n  const left = axisPosition(oWidth, wWidth, tX - wX, tWidth);\n  const start = isRTL ? 'right' : 'left';\n  const position = { top, [start]: left };\n  return fitPositionIntoSafeArea(position, layouts);\n};\n\nexport default class ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      scaleAnim: new Animated.Value(0.1),\n    };\n  }\n\n  componentDidMount() {\n    Animated.timing(this.state.scaleAnim, {\n      duration: OPEN_ANIM_DURATION,\n      toValue: 1,\n      easing: Easing.out(Easing.cubic),\n      useNativeDriver: USE_NATIVE_DRIVER,\n    }).start();\n  }\n\n  close() {\n    return new Promise(resolve => {\n      Animated.timing(this.state.scaleAnim, {\n        duration: CLOSE_ANIM_DURATION,\n        toValue: 0,\n        easing: Easing.in(Easing.cubic),\n        useNativeDriver: USE_NATIVE_DRIVER,\n      }).start(resolve);\n    });\n  }\n\n  render() {\n    const { style, children, layouts, ...other } = this.props;\n    const animation = {\n      transform: [ { scale: this.state.scaleAnim } ],\n      opacity: this.state.scaleAnim,\n    };\n    const position = computePosition(layouts, I18nManager.isRTL);\n    return (\n      <Animated.View {...other} style={[styles.options, style, animation, position]}>\n        {children}\n      </Animated.View>\n    );\n  }\n\n}\n\n// public exports\nContextMenu.computePosition = computePosition;\nContextMenu.fitPositionIntoSafeArea = fitPositionIntoSafeArea;\n\nexport const styles = StyleSheet.create({\n  options: {\n    position: 'absolute',\n    borderRadius: 2,\n    backgroundColor: 'white',\n    width: PixelRatio.roundToNearestPixel(200),\n\n    // Shadow only works on iOS.\n    shadowColor: 'black',\n    shadowOpacity: 0.3,\n    shadowOffset: { width: 3, height: 3 },\n    shadowRadius: 4,\n\n    // This will elevate the view on Android, causing shadow to be drawn.\n    elevation: 5,\n  },\n});\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { View } from 'react-native';\nimport MenuOptions from './MenuOptions';\nimport MenuTrigger from './MenuTrigger';\nimport ContextMenu from './renderers/ContextMenu';\nimport { makeName } from './helpers';\nimport { debug, CFG } from './logger';\nimport { withCtx } from './MenuProvider';\n\nconst isRegularComponent = c => c.type !== MenuOptions && c.type !== MenuTrigger;\nconst isTrigger = c => c.type === MenuTrigger;\nconst isMenuOptions = c => c.type === MenuOptions;\n\nexport class Menu extends Component {\n\n  constructor(props) {\n    super(props);\n    this._name = this.props.name || makeName();\n    this._forceClose = false;\n    const { ctx } = props;\n    if(!(ctx && ctx.menuActions)) {\n      throw new Error(\"Menu component must be ancestor of MenuProvider\");\n    }\n  }\n\n  componentDidMount() {\n    if (!this._validateChildren()) {\n      return;\n    }\n    debug('subscribing menu', this._name);\n    this.props.ctx.menuRegistry.subscribe(this);\n    this.props.ctx.menuActions._notify();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.name !== prevProps.name) {\n      console.warn('Menu name cannot be changed');\n    }\n    // force update if menu is opened as its content might have changed\n    const force = this.isOpen();\n    debug('component did update', this._name, force);\n    this.props.ctx.menuActions._notify(force);\n  }\n\n  componentWillUnmount() {\n    debug('unsubscribing menu', this._name);\n    if (this.isOpen()) {\n      this._forceClose = true;\n      this.props.ctx.menuActions._notify();\n    }\n    this.props.ctx.menuRegistry.unsubscribe(this);\n  }\n\n  open() {\n    return this.props.ctx.menuActions.openMenu(this._name);\n  }\n\n  close() {\n    return this.props.ctx.menuActions.closeMenu();\n  }\n\n  isOpen() {\n    if (this._forceClose) {\n      return false;\n    }\n    return this.props.hasOwnProperty('opened') ? this.props.opened : this._opened;\n  }\n\n  getName() {\n    return this._name;\n  }\n\n  render() {\n    const { style } = this.props;\n    const children = this._reduceChildren();\n    return (\n      <View style={style}>\n        {children}\n      </View>\n    );\n  }\n\n  _reduceChildren() {\n    return React.Children.toArray(this.props.children).reduce((r, child) => {\n      if (isTrigger(child)) {\n        r.push(React.cloneElement(child, {\n          key: null,\n          menuName: this._name,\n          onRef: (t => this._trigger = t),\n        }));\n      }\n      if (isRegularComponent(child)) {\n        r.push(child);\n      }\n      return r;\n    }, []);\n  }\n\n  _getTrigger() {\n    return this._trigger;\n  }\n\n  _getOptions() {\n    return React.Children.toArray(this.props.children).find(isMenuOptions);\n  }\n\n  _getOpened() {\n    return this._opened;\n  }\n\n  _setOpened(opened) {\n    this._opened = opened;\n  }\n\n  _validateChildren() {\n    const children = React.Children.toArray(this.props.children);\n    const options = children.find(isMenuOptions);\n    if (!options) {\n      console.warn('Menu has to contain MenuOptions component');\n    }\n    const trigger = children.find(isTrigger);\n    if (!trigger) {\n      console.warn('Menu has to contain MenuTrigger component');\n    }\n    return options && trigger;\n  }\n\n}\n\nMenu.propTypes = {\n  name: PropTypes.string,\n  renderer: PropTypes.func,\n  rendererProps: PropTypes.object,\n  onSelect: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  opened: PropTypes.bool,\n  onBackdropPress: PropTypes.func,\n};\n\nMenu.defaultProps = {\n  renderer: ContextMenu,\n  rendererProps: {},\n  onSelect: () => {},\n  onOpen: () => {},\n  onClose: () => {},\n  onBackdropPress: () => {},\n};\n\nconst MenuExternal = withCtx(Menu);\nObject.defineProperty(MenuExternal, 'debug', \n    { \n      get: function() { return CFG.debug }, \n      set: function(val) { CFG.debug = val }, \n    });\nMenuExternal.setDefaultRenderer = (renderer) => {\n  Menu.defaultProps.renderer = renderer;\n}\nMenuExternal.setDefaultRendererProps = (rendererProps) => {\n  Menu.defaultProps.rendererProps = rendererProps;\n}\nexport default MenuExternal;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, StyleSheet, Text } from 'react-native';\nimport { debug } from './logger';\nimport { makeTouchable } from './helpers';\nimport { withCtx } from './MenuProvider';\n\n\nexport class MenuOption extends Component {\n\n  _onSelect() {\n    const { value } = this.props;\n    const onSelect = this.props.onSelect || this._getMenusOnSelect()\n    const shouldClose = onSelect(value) !== false;\n    debug('select option', value, shouldClose);\n    if (shouldClose) {\n        this.props.ctx.menuActions.closeMenu();\n    }\n  }\n\n  _getMenusOnSelect() {\n    const menu = this.props.ctx.menuActions._getOpenedMenu();\n    return menu.instance.props.onSelect;\n  }\n\n  _getCustomStyles() {\n    // FIXME react 16.3 workaround for ControlledExample!\n    const menu = this.props.ctx.menuActions._getOpenedMenu() || {}\n    const { optionsCustomStyles } = menu;\n    return {\n      ...optionsCustomStyles,\n      ...this.props.customStyles,\n    }\n  }\n\n  render() {\n    const { text, disabled, disableTouchable, children, style, testID } = this.props;\n    const customStyles = this._getCustomStyles()\n    if (text && React.Children.count(children) > 0) {\n      console.warn(\"MenuOption: Please don't use text property together with explicit children. Children are ignored.\");\n    }\n    if (disabled) {\n      const disabledStyles = [defaultStyles.optionTextDisabled, customStyles.optionText];\n      return (\n        <View style={[defaultStyles.option, customStyles.optionWrapper, style]}>\n          {text ? <Text style={disabledStyles}>{text}</Text> : children}\n        </View>\n      );\n    }\n    const rendered = (\n      <View style={[defaultStyles.option, customStyles.optionWrapper, style]}>\n        {text ? <Text style={customStyles.optionText}>{text}</Text> : children}\n      </View>\n    );\n    if (disableTouchable) {\n      return rendered;\n    }\n    else {\n      const { Touchable, defaultTouchableProps } = makeTouchable(customStyles.OptionTouchableComponent);\n      return (\n        <Touchable\n          testID={testID}\n          onPress={() => this._onSelect()}\n          {...defaultTouchableProps}\n          {...customStyles.optionTouchable}\n        >\n          {rendered}\n        </Touchable>\n      );\n    }\n  }\n}\n\nMenuOption.propTypes = {\n  disabled: PropTypes.bool,\n  disableTouchable: PropTypes.bool,\n  onSelect: PropTypes.func,\n  text: PropTypes.string,\n  value: PropTypes.any,\n  customStyles: PropTypes.object,\n  testID: PropTypes.string,\n};\n\nMenuOption.defaultProps = {\n  disabled: false,\n  disableTouchable: false,\n  customStyles: {},\n  testID: undefined,\n};\n\nconst defaultStyles = StyleSheet.create({\n  option: {\n    padding: 5,\n    backgroundColor: 'transparent',\n  },\n  optionTextDisabled: {\n    color: '#ccc',\n  },\n});\n\nexport default withCtx(MenuOption);\n","import React from 'react';\nimport { I18nManager, View } from 'react-native';\n\nimport { computePosition, styles } from './ContextMenu';\n\n/**\nSimplified version of ContextMenu without animation.\n*/\nexport default class NotAnimatedContextMenu extends React.Component {\n\n  render() {\n    const { style, children, layouts, ...other } = this.props;\n    const position = computePosition(layouts, I18nManager.isRTL);\n    return (\n      <View {...other} style={[styles.options, style, position]}>\n        {children}\n      </View>\n    );\n  }\n\n}\n","import React from 'react';\nimport { Animated, StyleSheet, Easing } from 'react-native';\nimport { OPEN_ANIM_DURATION, CLOSE_ANIM_DURATION, USE_NATIVE_DRIVER } from '../constants';\n\nexport const computePosition = (layouts) => {\n  const { windowLayout, optionsLayout } = layouts\n  const { height: wHeight } = windowLayout;\n  const { height: oHeight } = optionsLayout;\n  const top  = wHeight - oHeight;\n  const left = 0, right = 0;\n  const position = { top, left, right };\n  // TODO what is the best way to handle safeArea?\n  // most likely some extra paddings inside SlideInMenu \n  return position;\n}\n\nexport default class SlideInMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      slide: new Animated.Value(0),\n    };\n  }\n\n  componentDidMount() {\n    Animated.timing(this.state.slide, {\n      duration: OPEN_ANIM_DURATION,\n      toValue: 1,\n      easing: Easing.out(Easing.cubic),\n      useNativeDriver: USE_NATIVE_DRIVER,\n    }).start();\n  }\n\n  close() {\n    return new Promise(resolve => {\n      Animated.timing(this.state.slide, {\n        duration: CLOSE_ANIM_DURATION,\n        toValue: 0,\n        easing: Easing.in(Easing.cubic),\n        useNativeDriver: USE_NATIVE_DRIVER,\n      }).start(resolve);\n    });\n  }\n\n  render() {\n    const { style, children, layouts, ...other } = this.props;\n    const { height: oHeight } = layouts.optionsLayout;\n    const animation = {\n      transform: [{\n        translateY: this.state.slide.interpolate({\n          inputRange: [0, 1],\n          outputRange: [oHeight, 0],\n        }),\n      }],\n    };\n    const position = computePosition(layouts);\n    return (\n      <Animated.View style={[styles.options, style, animation, position]} {...other}>\n        {children}\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  options: {\n    position: 'absolute',\n    backgroundColor: 'white',\n\n    // Shadow only works on iOS.\n    shadowColor: 'black',\n    shadowOpacity: 0.3,\n    shadowOffset: { width: 3, height: 3 },\n    shadowRadius: 4,\n\n    // This will elevate the view on Android, causing shadow to be drawn.\n    elevation: 5,\n  },\n});\n","import { I18nManager, Animated, Easing, StyleSheet, View } from 'react-native';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { OPEN_ANIM_DURATION, CLOSE_ANIM_DURATION, USE_NATIVE_DRIVER } from '../constants.js';\n\nconst popoverPadding = 7;\nconst anchorSize = 15;\nconst anchorHyp = Math.sqrt(anchorSize*anchorSize + anchorSize*anchorSize);\nconst anchorOffset = (anchorHyp + anchorSize) / 2 - popoverPadding;\n\n// left/top placement\nfunction axisNegativeSideProperties({ oDim, tPos }) {\n  return { position: tPos - oDim };\n}\n\n// right/bottom placement\nfunction axisPositiveSideProperties({ tPos, tDim }) {\n  // substract also anchor placeholder from the beginning\n  return { position: tPos + tDim - anchorSize };\n}\n\n// computes offsets (off screen overlap) of popover when trying to align it to the center\nfunction centeringProperties({ oDim, wDim, tPos, tDim }) {\n  const center = Math.round(tPos + (tDim / 2));\n  const leftOffset = (oDim / 2) - center;\n  const rightOffset = center + (oDim / 2) - wDim;\n  return { center, leftOffset, rightOffset };\n}\n\n/**\n * Computes position and offset of popover when trying to align it to the triger center.\n * It consideres window boundaries.\n * Returns object with keys:\n *   - position: <Number> Absolute position - top/left,\n *   - offset: <Number> window overlapping size if window boundaries were not considered\n */\nfunction axisCenteredPositionProperties(options) {\n  const { oDim, wDim } = options;\n  const { center, leftOffset, rightOffset } = centeringProperties(options);\n  if (leftOffset > 0 || rightOffset > 0) {\n    // right/bottom position is better\n    if (leftOffset < rightOffset) {\n      return { offset: rightOffset, position: wDim - oDim };\n    }\n    // left/top position is better\n    if (rightOffset < leftOffset) {\n      return { offset: -leftOffset, position: 0 };\n    }\n  }\n  // centered position\n  return { offset: 0, position: center - oDim / 2 };\n}\n\n/* Evaluate centering placement */\nfunction getCenteringPrice(options) {\n  const { leftOffset, rightOffset } = centeringProperties(options);\n  // TODO: currently shifted popovers have higher price,\n  // popover shift could be taken into account with the same price\n  return Math.max(0, leftOffset) + Math.max(0, rightOffset);\n}\n\n/* Evaluate top placement */\nfunction getTopPrice(hOptions, vOptions) {\n  const centerOffset = getCenteringPrice(vOptions)\n  const sideOffset =  Math.max(0, hOptions.oDim - hOptions.tPos)\n  return centerOffset + sideOffset\n}\n\n/* Evaluate bottom placement */\nfunction getBottomPrice(hOptions, vOptions) {\n  const centerOffset = getCenteringPrice(vOptions)\n  const sideOffset =  Math.max(0, hOptions.tPos + hOptions.tDim + hOptions.oDim - hOptions.wDim)\n  return centerOffset + sideOffset\n}\n\n/* Evaluate left placement */\nfunction getLeftPrice(hOptions, vOptions) {\n  const centerOffset = getCenteringPrice(hOptions)\n  const sideOffset =  Math.max(0, vOptions.oDim - vOptions.tPos)\n  return centerOffset + sideOffset\n}\n\n/* Evaluate right placement */\nfunction getRightPrice(hOptions, vOptions) {\n  const centerOffset = getCenteringPrice(hOptions)\n  const sideOffset =  Math.max(0, vOptions.tPos + vOptions.tDim + vOptions.oDim - vOptions.wDim)\n  return centerOffset + sideOffset\n}\n\nfunction getStartPosKey(isRTL) {\n  return isRTL ? 'right' : 'left';\n}\n\nfunction topProperties(hOptions, vOptions, isRTL) {\n  const centered = axisCenteredPositionProperties(vOptions);\n  const side = axisNegativeSideProperties(hOptions);\n  return {\n    position: {\n      top: side.position,\n      [getStartPosKey(isRTL)]: centered.position,\n    },\n    offset: centered.offset,\n    placement: 'top',\n  };\n}\n\nfunction bottomProperties(hOptions, vOptions, isRTL) {\n  const centered = axisCenteredPositionProperties(vOptions);\n  const side = axisPositiveSideProperties(hOptions);\n  return {\n    position: {\n      top: side.position,\n      [getStartPosKey(isRTL)]: centered.position,\n    },\n    offset: centered.offset,\n    placement: 'bottom',\n  };\n}\n\nfunction rightProperties(hOptions, vOptions, isRTL) {\n  const centered = axisCenteredPositionProperties(hOptions);\n  const side = axisPositiveSideProperties(vOptions);\n  return {\n    position: {\n      top: centered.position,\n      [getStartPosKey(isRTL)]: side.position,\n    },\n    offset: centered.offset,\n    placement: 'right',\n  };\n}\n\nfunction leftProperties(hOptions, vOptions, isRTL) {\n  const centered = axisCenteredPositionProperties(hOptions);\n  const side = axisNegativeSideProperties(vOptions);\n  return {\n    position: {\n      top: centered.position,\n      [getStartPosKey(isRTL)]: side.position,\n    },\n    offset: centered.offset,\n    placement: 'left',\n  };\n}\n\n// maps placement to function which computes correct properties\nconst propertiesByPlacement = {\n  top: topProperties,\n  bottom: bottomProperties,\n  left: leftProperties,\n  right: rightProperties,\n};\n\n/**\n * Computes properties needed for drawing popover.\n * Returns object with keys:\n *   - position: <Object> { top: Number, left: Number } - popover absolute position\n *   - placement: <Enum> top|left|top|bottom - position to the trigger\n *   - offset: <Number> value by which must be anchor shifted\n */\nexport function computeProperties (\n  { windowLayout, triggerLayout, optionsLayout },\n  placement,\n  preferredPlacement,\n  isRTL,\n) {\n  const { x: wX, y: wY, width: wWidth, height: wHeight } = windowLayout;\n  const { x: tX, y: tY, height: tHeight, width: tWidth } = triggerLayout;\n  const { height: oHeight, width: oWidth } = optionsLayout;\n  const hOptions = {\n    oDim: oHeight + popoverPadding * 2,\n    wDim: wHeight,\n    tPos: tY - wY,\n    tDim: tHeight,\n  };\n  const vOptions = {\n    oDim: oWidth + popoverPadding * 2,\n    wDim: wWidth,\n    tPos: tX - wX,\n    tDim: tWidth,\n  };\n  if (placement !== 'auto' && propertiesByPlacement[placement]) {\n    return propertiesByPlacement[placement](hOptions, vOptions, isRTL)\n  }\n\n  const prices = {\n    top: getTopPrice(hOptions, vOptions),\n    bottom: getBottomPrice(hOptions, vOptions),\n    right: getRightPrice(hOptions, vOptions),\n    left: getLeftPrice(hOptions, vOptions),\n  };\n  const bestPrice = Object.values(prices).sort((a, b) => a - b)[0]\n  const bestPlacement = prices[preferredPlacement] === bestPrice\n    ? preferredPlacement\n    : Object.keys(prices).find(pl => prices[pl] === bestPrice)\n\n  return propertiesByPlacement[bestPlacement](hOptions, vOptions, isRTL)\n}\n\nexport default class Popover extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      scaleAnim: new Animated.Value(0.1),\n    };\n  }\n\n  componentDidMount() {\n    Animated.timing(this.state.scaleAnim, {\n      duration: OPEN_ANIM_DURATION,\n      toValue: 1,\n      easing: Easing.out(Easing.cubic),\n      useNativeDriver: USE_NATIVE_DRIVER,\n    }).start();\n  }\n\n  close() {\n    return new Promise(resolve => {\n      Animated.timing(this.state.scaleAnim, {\n        duration: CLOSE_ANIM_DURATION,\n        toValue: 0,\n        easing: Easing.in(Easing.cubic),\n        useNativeDriver: USE_NATIVE_DRIVER,\n      }).start(resolve);\n    });\n  }\n\n  render() {\n    const {\n      style,\n      children,\n      layouts,\n      anchorStyle,\n      preferredPlacement,\n      placement: userPlacement,\n      ...other\n    } = this.props;\n    const isRTL = I18nManager.isRTL;\n    const animation = {\n      transform: [ { scale: this.state.scaleAnim } ],\n      opacity: this.state.scaleAnim,\n    };\n    const { position, placement, offset } = computeProperties(\n      layouts,\n      userPlacement,\n      preferredPlacement,\n      isRTL,\n    );\n    return (\n      <Animated.View\n        style={[\n          styles.animated,\n          animation,\n          position,\n          getContainerStyle({ placement, isRTL }),\n        ]}\n        pointerEvents=\"box-none\"\n      >\n        <View\n          style={[\n            styles.anchor,\n            dynamicAnchorStyle({ placement, offset, isRTL }),\n            anchorStyle,\n          ]}\n        />\n        <View {...other} style={[styles.options, style]}>\n          {children}\n        </View>\n      </Animated.View>\n    );\n  }\n\n}\n\nPopover.propTypes = {\n  anchorStyle: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array,\n  ]),\n  placement: PropTypes.oneOf(['auto', 'top', 'right', 'bottom', 'left']),\n  preferredPlacement: PropTypes.oneOf(['top', 'right', 'bottom', 'left']),\n};\n\nPopover.defaultProps = {\n  preferredPlacement: 'top',\n  placement: 'auto',\n};\n\nconst getContainerStyle = ({ placement, isRTL }) => ({\n  left: {\n    flexDirection: isRTL ? 'row' : 'row-reverse',\n  },\n  right: {\n    flexDirection: isRTL ? 'row-reverse' : 'row',\n  },\n  top: {\n    flexDirection: 'column-reverse',\n  },\n  bottom: {\n    flexDirection: 'column',\n  },\n})[placement]\n\nconst dynamicAnchorStyle = ({ offset, placement, isRTL }) => {\n  const start = getStartPosKey(isRTL);\n  switch (placement) {\n    case 'right':\n      return {\n        top: offset,\n        transform: [\n          { translateX: anchorOffset },\n          { rotate: '45deg' },\n        ],\n      };\n    case 'left':\n      return {\n        top: offset,\n        transform: [\n          { translateX: -anchorOffset },\n          { rotate: '45deg' },\n        ],\n      };\n    case 'top':\n      return {\n        [start]: offset,\n        transform: [\n          { translateY: -anchorOffset },\n          { rotate: '45deg' },\n        ],\n      };\n    case 'bottom':\n      return {\n        [start]: offset,\n        transform: [\n          { translateY: anchorOffset },\n          { rotate: '45deg' },\n        ],\n      };\n  }\n}\n\nexport const styles = StyleSheet.create({\n  animated: {\n    padding: popoverPadding,\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    alignItems: 'center',\n  },\n  options: {\n    borderRadius: 2,\n    minWidth: anchorHyp,\n    minHeight: anchorHyp,\n    backgroundColor: 'white',\n\n    // Shadow only works on iOS.\n    shadowColor: 'black',\n    shadowOpacity: 0.3,\n    shadowOffset: { width: 3, height: 3 },\n    shadowRadius: 4,\n\n    // This will elevate the view on Android, causing shadow to be drawn.\n    elevation: 5,\n  },\n  anchor: {\n    width: anchorSize,\n    height: anchorSize,\n    backgroundColor: 'white',\n    elevation: 5,\n  },\n});\n","import './polyfills';\nimport { deprecatedComponent } from './helpers'\n\nimport Menu from './Menu';\nimport MenuProvider, { withCtx } from './MenuProvider';\nimport MenuOption from './MenuOption';\nimport MenuOptions from './MenuOptions';\nimport MenuTrigger from './MenuTrigger';\n\nimport ContextMenu from './renderers/ContextMenu';\nimport NotAnimatedContextMenu from './renderers/NotAnimatedContextMenu';\nimport SlideInMenu from './renderers/SlideInMenu';\nimport Popover from './renderers/Popover';\nconst renderers = { ContextMenu, SlideInMenu, NotAnimatedContextMenu, Popover };\n\nconst MenuContext = deprecatedComponent(\n  'MenuContext is deprecated and it might be removed in future releases, use MenuProvider instead.',\n  ['openMenu', 'toggleMenu', 'closeMenu', 'isMenuOpen'],\n)(MenuProvider);\n\nexport {\n  Menu as default,\n  Menu,\n  MenuProvider,\n  MenuContext,\n  MenuOption,\n  MenuOptions,\n  MenuTrigger,\n  renderers,\n  withCtx as withMenuContext,\n};\n"]},"metadata":{},"sourceType":"script"}